!function(){var e=document.head.querySelector('link[rel="manifest"]'),t=e?e.href:"";if("fetch"in window){var n=["standalone","fullscreen","minimal-ui"],r="#f8f9fa",a=36,o=128,i=48,l=0,c=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple"),u=navigator.userAgent&&-1!==navigator.userAgent.indexOf("Edge"),d="undefined"!=typeof Windows;"complete"===document.readyState?p():window.addEventListener("load",p)}function p(){window.fetch(t).then(function(e){return e.json()}).then(function(e){return function(e){(e.icons||[]).sort(function(e,t){return parseInt(t.sizes,10)-parseInt(e.sizes,10)});var t=function(){if(!(document.querySelectorAll&&document.querySelectorAll('link[rel="apple-touch-icon"]')))return"/apple-touch-icon.png";for(var e,t=document.querySelectorAll('link[rel="apple-touch-icon"]'),n=0,r=0;r<t.length;r++)try{var a=t[r].getAttribute("sizes").split("x")[0];a>n&&(n=a),e=t[r].getAttribute("href")}catch(n){e||(e=t[r].getAttribute("href"))}return e}(),p=e.display,h=-1!==n.indexOf(p);s("mobile-web-app-capable",h),function(e){if(c||d){var t=m(e);if(c)s("apple-mobile-web-app-status-bar-style",t?"black":"default");else{var n=function(){try{return Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar}catch(e){return null}}();if(null===n){console.debug("UWP no titleBar");return}n.foregroundColor=f(t?"black":"white"),n.backgroundColor=f(e)}}}(e.theme_color||"black"),u&&(s("msapplication-starturl",e.start_url||"/"),s("msapplication-TileColor",e.theme_color)),document.head.querySelector('[name="theme-color"]')||s("theme-color",e.theme_color);var g="por"===(b=String(e.orientation||"").substr(0,3))?"portrait":"lan"===b?"landscape":"";if(s("x5-orientation",g),s("screen-orientation",g),"fullscreen"===p?(s("x5-fullscreen","true"),s("full-screen","yes")):h&&(s("x5-page-mode","app"),s("browsermode","application")),c){var v,b,y,A=m(e.background_color||r),x=e.name||e.short_name||document.title,k=((e.related_applications||[]).filter(function(e){return"itunes"===e.platform}).forEach(function(e){if(e.id)y=e.id;else{var t=e.url.match(/id(\d+)/);t&&(y=t[1])}}),y);k&&s("apple-itunes-app","app-id=".concat(k)),s("apple-mobile-web-app-capable",h),s("apple-mobile-web-app-title",x);var S=new Set,C=new Image;C.crossOrigin="anonymous",C.onload=function(){var e,t;e=_(window.screen,"portrait",C),t=_({width:window.screen.height,height:window.screen.width},"landscape",C),S.forEach(function(e){return e.remove()}),document.head.appendChild(e),document.head.appendChild(t),S.add(e),S.add(t),console.log("done")},C.src=t}function _(t,n,c){var u=t.width,d=t.height,p=window.devicePixelRatio,s=w({width:u*p,height:d*p});s.scale(p,p),s.fillStyle=e.background_color||r,s.fillRect(0,0,u,d),s.translate(u/2,(d-l)/2),s.font="".concat(a,"px HelveticaNeue-CondensedBold"),s.fillStyle=A?"white":"black";var f=s.measureText(x).width;if(c){var h=c.width/p,m=c.height/p;m>o&&(h/=m/o,m=o),h>=i&&m>=i&&(s.drawImage(c,-(h/2),-(m/2)-24,h,m),s.translate(0,m/2+l))}s.fillText(x,-(f/2),16);var g=document.createElement("link");return g.setAttribute("rel","apple-touch-startup-image"),g.setAttribute("media","(orientation: ".concat(n,")")),g.setAttribute("href",s.canvas.toDataURL()),g}}(e)}).catch(function(e){return console.warn("pwacompat.js error",e)})}function s(e,t){t&&(!0===t&&(t="yes"),function(e,t){var n=document.createElement(e);for(var r in t)n.setAttribute(r,t[r]);document.head.appendChild(n)}("meta",{name:e,content:t}))}function f(e){var t=h(e);return{r:t[0],g:t[1],b:t[2],a:t[3]}}function h(e){var t=w();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}function m(e){var t=h(e).map(function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return Math.abs(1.05/(.2126*t[0]+.7152*t[1]+.0722*t[2]+.05))>3}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},t=e.width,n=e.height,r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d")}}();