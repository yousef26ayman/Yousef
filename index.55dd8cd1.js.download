!function(){var t,e,i,n,s,r,a,o,c,h,u,l,d,f,p,g,m,v,y,I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},T={},E={},b=I.parcelRequireeaa3;function S(t,e,i,n,s,r,a){try{var o=t[r](a),c=o.value}catch(t){i(t);return}o.done?e(c):Promise.resolve(c).then(n,s)}function C(t){return function(){var e=this,i=arguments;return new Promise(function(n,s){var r=t.apply(e,i);function a(t){S(r,n,s,a,o,"next",t)}function o(t){S(r,n,s,a,o,"throw",t)}a(void 0)})}}function D(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e,i){return e&&w(t.prototype,e),i&&w(t,i),t}function _(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}function x(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function R(t,e){if(t){if("string"==typeof t)return H(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return H(t,e)}}function N(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||R(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){var e=L();return function(){var i,n=M(t);return i=e?Reflect.construct(n,arguments,M(this).constructor):n.apply(this,arguments),i&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:x(this)}}function B(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(c){return function(o){if(i)throw TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(a=0)),a;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function F(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i,n,s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var r=[],a=!0,o=!1;try{for(s=s.call(t);!(a=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){o=!0,n=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw n}}return r}}(t,e)||R(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t,e,i){return(U=L()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var s=new(Function.bind.apply(t,n));return i&&P(s,i.prototype),s}).apply(null,arguments)}function G(t){var e="function"==typeof Map?new Map:void 0;return(G=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return U(t,arguments,M(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),P(i,t)})(t)}null==b&&((b=function(t){if(t in T)return T[t].exports;if(t in E){var e=E[t];delete E[t];var i={id:t,exports:{}};return T[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){E[t]=e},I.parcelRequireeaa3=b),b.register,"function"==typeof SuppressedError&&SuppressedError;var W={},j=W={};function V(){throw Error("setTimeout has not been defined")}function Y(){throw Error("clearTimeout has not been defined")}function z(t){if(s===setTimeout)return setTimeout(t,0);if((s===V||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:V}catch(t){s=V}try{r="function"==typeof clearTimeout?clearTimeout:Y}catch(t){r=Y}}();var X=[],K=!1,J=-1;function q(){K&&a&&(K=!1,a.length?X=a.concat(X):J=-1,X.length&&$())}function $(){if(!K){var t=z(q);K=!0;for(var e=X.length;e;){for(a=X,X=[];++J<e;)a&&a[J].run();J=-1,e=X.length}a=null,K=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===Y||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function Z(t,e){this.fun=t,this.array=e}function Q(){}j.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];X.push(new Z(t,e)),1!==X.length||K||z($)},Z.prototype.run=function(){this.fun.apply(null,this.array)},j.title="browser",j.browser=!0,j.env={},j.argv=[],j.version="",j.versions={},j.on=Q,j.addListener=Q,j.once=Q,j.off=Q,j.removeListener=Q,j.removeAllListeners=Q,j.emit=Q,j.prependListener=Q,j.prependOnceListener=Q,j.listeners=function(t){return[]},j.binding=function(t){throw Error("process.binding is not supported")},j.cwd=function(){return"/"},j.chdir=function(t){throw Error("process.chdir is not supported")},j.umask=function(){return 0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(t){for(var e=[],i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?e[i++]=s:(s<2048?e[i++]=s>>6|192:((64512&s)==55296&&n+1<t.length&&(64512&t.charCodeAt(n+1))==56320?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++n)),e[i++]=s>>18|240,e[i++]=s>>12&63|128):e[i++]=s>>12|224,e[i++]=s>>6&63|128),e[i++]=63&s|128)}return e},te=function(t){for(var e=[],i=0,n=0;i<t.length;){var s=t[i++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){var r=t[i++];e[n++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){var a=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(1023&a))}else{var o=t[i++],c=t[i++];e[n++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&c)}}return e.join("")},ti={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],s=0;s<t.length;s+=3){var r=t[s],a=s+1<t.length,o=a?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,u=r>>2,l=(3&r)<<4|o>>4,d=(15&o)<<2|h>>6,f=63&h;c||(f=64,a||(d=64)),n.push(i[u],i[l],i[d],i[f])}return n.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tt(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):te(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],s=0;s<t.length;){var r=i[t.charAt(s++)],a=s<t.length?i[t.charAt(s)]:0,o=++s<t.length?i[t.charAt(s)]:64,c=++s<t.length?i[t.charAt(s)]:64;if(++s,null==r||null==a||null==o||null==c)throw new tn;var h=r<<2|a>>4;if(n.push(h),64!==o){var u=a<<4&240|o>>2;if(n.push(u),64!==c){var l=o<<6&192|c;n.push(l)}}}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},tn=function(t){O(i,t);var e=k(i);function i(){var t;return D(this,i),t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments))),t.name="DecodeBase64StringError",t}return i}(G(Error)),ts=function(t){var e=tt(t);return ti.encodeByteArray(e,!0)},tr=function(t){return ts(t).replace(/\./g,"")},ta=function(t){try{return ti.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},to=function(){if(void 0!==W&&void 0!==W.env){var t=void 0;if(t)return JSON.parse(t)}},tc=function(){if("undefined"!=typeof document){try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}var t,e=t&&ta(t[1]);return e&&JSON.parse(e)}},th=function(){try{return(/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==I)return I;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||to()||tc())}catch(t){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t));return}},tu=function(){var t;return null===(t=th())||void 0===t?void 0:t.config},tl=function(){function t(){var e=this;D(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i})}return A(t,[{key:"wrapCallback",value:function(t){var e=this;return function(i,n){i?e.reject(i):e.resolve(n),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(i):t(i,n))}}}]),t}();function td(){try{return"object"==typeof indexedDB}catch(t){return!1}}function tf(){return new Promise(function(t,e){try{var i=!0,n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=function(){s.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=function(){i=!1},s.onerror=function(){var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}var tp=function(t){O(i,t);var e=k(i);function i(t,n,s){var r;return D(this,i),(r=e.call(this,n)).code=t,r.customData=s,r.name="FirebaseError",Object.setPrototypeOf(x(r),i.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(r),tg.prototype.create),r}return i}(G(Error)),tg=function(){function t(e,i,n){D(this,t),this.service=e,this.serviceName=i,this.errors=n}return A(t,[{key:"create",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var s=i[0]||{},r="".concat(this.service,"/").concat(t),a=this.errors[t],o=a?a.replace(tm,function(t,e){var i=s[e];return null!=i?String(i):"<".concat(e,"?>")}):"Error",c="".concat(this.serviceName,": ").concat(o," (").concat(r,").");return new tp(r,c,s)}}]),t}(),tm=/\{\$([^}]+)}/g;function tv(t,e){if(t===e)return!0;var i=Object.keys(t),n=Object.keys(e),s=!0,r=!1,a=void 0;try{for(var o,c=i[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var h=o.value;if(!n.includes(h))return!1;var u=t[h],l=e[h];if(ty(u)&&ty(l)){if(!tv(u,l))return!1}else if(u!==l)return!1}}catch(t){r=!0,a=t}finally{try{s||null==c.return||c.return()}finally{if(r)throw a}}var d=!0,f=!1,p=void 0;try{for(var g,m=n[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;if(!i.includes(v))return!1}}catch(t){f=!0,p=t}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}return!0}function ty(t){return null!==t&&"object"==typeof t}function tI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=e*Math.pow(i,t),s=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){return t&&t._delegate?t._delegate:t}var tE=function(){function t(e,i,n){D(this,t),this.name=e,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return A(t,[{key:"setInstantiationMode",value:function(t){return this.instantiationMode=t,this}},{key:"setMultipleInstances",value:function(t){return this.multipleInstances=t,this}},{key:"setServiceProps",value:function(t){return this.serviceProps=t,this}},{key:"setInstanceCreatedCallback",value:function(t){return this.onInstanceCreated=t,this}}]),t}(),tb="[DEFAULT]",tS=function(){function t(e,i){D(this,t),this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return A(t,[{key:"get",value:function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var i=new tl;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{var n=this.getOrInitializeService({instanceIdentifier:e});n&&i.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}},{key:"getImmediate",value:function(t){var e,i=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),n=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(n)return null;throw t}else{if(n)return null;throw Error("Service ".concat(this.name," is not available"))}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:tb})}catch(t){}var e=!0,i=!1,n=void 0;try{for(var s,r=this.instancesDeferred.entries()[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var a=F(s.value,2),o=a[0],c=a[1],h=this.normalizeInstanceIdentifier(o);try{var u=this.getOrInitializeService({instanceIdentifier:h});c.resolve(u)}catch(t){}}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}}}},{key:"clearInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tb;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}},{key:"delete",value:function(){var t=this;return C(function(){var e;return B(this,function(i){switch(i.label){case 0:return[4,Promise.all(N((e=Array.from(t.instances.values())).filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()})).concat(N(e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return i.sent(),[2]}})})()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tb;return this.instances.has(t)}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tb;return this.instancesOptions.get(t)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var n=this.getOrInitializeService({instanceIdentifier:i,options:void 0===e?{}:e}),s=!0,r=!1,a=void 0;try{for(var o,c=this.instancesDeferred.entries()[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var h=F(o.value,2),u=h[0],l=h[1],d=this.normalizeInstanceIdentifier(u);i===d&&l.resolve(n)}}catch(t){r=!0,a=t}finally{try{s||null==c.return||c.return()}finally{if(r)throw a}}return n}},{key:"onInit",value:function(t,e){var i,n=this.normalizeInstanceIdentifier(e),s=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;s.add(t),this.onInitCallbacks.set(n,s);var r=this.instances.get(n);return r&&t(r,n),function(){s.delete(t)}}},{key:"invokeOnInitCallbacks",value:function(t,e){var i=this.onInitCallbacks.get(e);if(i){var n=!0,s=!1,r=void 0;try{for(var a,o=i[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var c=a.value;try{c(t,e)}catch(t){}}}catch(t){s=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}}}},{key:"getOrInitializeService",value:function(t){var e=t.instanceIdentifier,i=t.options,n=void 0===i?{}:i,s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:e===tb?void 0:e,options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch(t){}return s||null}},{key:"normalizeInstanceIdentifier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tb;return this.component?this.component.multipleInstances?t:tb:t}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}(),tC=function(){function t(e){D(this,t),this.name=e,this.providers=new Map}return A(t,[{key:"addComponent",value:function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}},{key:"addOrOverwriteComponent",value:function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}},{key:"getProvider",value:function(t){if(this.providers.has(t))return this.providers.get(t);var e=new tS(t,this);return this.providers.set(t,e),e}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}(),tD=[];(n=o={})[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT";var tw={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},tA=o.INFO,t_=(_(c={},o.DEBUG,"log"),_(c,o.VERBOSE,"log"),_(c,o.INFO,"info"),_(c,o.WARN,"warn"),_(c,o.ERROR,"error"),c),tP=function(t,e){for(var i,n=arguments.length,s=Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];if(!(e<t.logLevel)){var a=new Date().toISOString(),o=t_[e];if(o)(i=console)[o].apply(i,["[".concat(a,"]  ").concat(t.name,":")].concat(N(s)));else throw Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))}},tO=function(){function t(e){D(this,t),this.name=e,this._logLevel=tA,this._logHandler=tP,this._userLogHandler=null,tD.push(this)}return A(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in o))throw TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}},{key:"setLogLevel",value:function(t){this._logLevel="string"==typeof t?tw[t]:t}},{key:"logHandler",get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t}},{key:"debug",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.DEBUG].concat(N(e))),this._logHandler.apply(this,[this,o.DEBUG].concat(N(e)))}},{key:"log",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.VERBOSE].concat(N(e))),this._logHandler.apply(this,[this,o.VERBOSE].concat(N(e)))}},{key:"info",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.INFO].concat(N(e))),this._logHandler.apply(this,[this,o.INFO].concat(N(e)))}},{key:"warn",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.WARN].concat(N(e))),this._logHandler.apply(this,[this,o.WARN].concat(N(e)))}},{key:"error",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.ERROR].concat(N(e))),this._logHandler.apply(this,[this,o.ERROR].concat(N(e)))}}]),t}(),tx=new WeakMap,tH=new WeakMap,tR=new WeakMap,tN=new WeakMap,tM=new WeakMap,tL={get:function(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return tH.get(t);if("objectStoreNames"===e)return t.objectStoreNames||tR.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return tk(t[e])},set:function(t,e,i){return t[e]=i,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function tk(t){if(t instanceof IDBRequest){return(e=new Promise(function(e,i){var n=function(){t.removeEventListener("success",s),t.removeEventListener("error",r)},s=function(){e(tk(t.result)),n()},r=function(){i(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",r)})).then(function(e){e instanceof IDBCursor&&tx.set(e,t)}).catch(function(){}),tM.set(e,t),e}if(tN.has(t))return tN.get(t);var e,i,n="function"==typeof(i=t)?i!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(u||(u=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(i)?function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.apply(tB(this),e),tk(tx.get(this))}:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return tk(i.apply(tB(this),e))}:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var r=i.call.apply(i,[tB(this),t].concat(N(n)));return tR.set(r,t.sort?t.sort():[t]),tk(r)}:(i instanceof IDBTransaction&&function(t){if(!tH.has(t)){var e=new Promise(function(e,i){var n=function(){t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=function(){e(),n()},r=function(){i(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)});tH.set(t,e)}}(i),(h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(function(t){return i instanceof t}))?new Proxy(i,tL):i;return n!==t&&(tN.set(t,n),tM.set(n,t)),n}var tB=function(t){return tM.get(t)};function tF(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.blocked,s=i.upgrade,r=i.blocking,a=i.terminated,o=indexedDB.open(t,e),c=tk(o);return s&&o.addEventListener("upgradeneeded",function(t){s(tk(o.result),t.oldVersion,t.newVersion,tk(o.transaction),t)}),n&&o.addEventListener("blocked",function(t){return n(t.oldVersion,t.newVersion,t)}),c.then(function(t){a&&t.addEventListener("close",function(){return a()}),r&&t.addEventListener("versionchange",function(t){return r(t.oldVersion,t.newVersion,t)})}).catch(function(){}),c}var tU=["get","getKey","getAll","getAllKeys","count"],tG=["put","add","delete","clear"],tW=new Map;function tj(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e){if(tW.get(e))return tW.get(e);var i=e.replace(/FromIndex$/,""),n=e!==i,s=tG.includes(i);if(i in(n?IDBIndex:IDBObjectStore).prototype&&(s||tU.includes(i))){var r,a=(r=C(function(t){var e,r,a,o,c,h,u=arguments;return B(this,function(l){switch(l.label){case 0:for(r=Array((e=u.length)>1?e-1:0),a=1;a<e;a++)r[a-1]=u[a];return h=(c=this.transaction(t,s?"readwrite":"readonly")).store,n&&(h=h.index(r.shift())),[4,Promise.all([(o=h)[i].apply(o,N(r)),s&&c.done])];case 1:return[2,l.sent()[0]]}})}),function(t){return r.apply(this,arguments)});return tW.set(e,a),a}}}e=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){_(t,e,i[e])})}return t}({},t=tL),i=i={get:function(e,i,n){return tj(e,i)||t.get(e,i,n)},has:function(e,i){return!!tj(e,i)||t.has(e,i)}},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):(function(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i.push.apply(i,n)}return i})(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}),tL=e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tV=function(){function t(e){D(this,t),this.container=e}return A(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(t){if((null==(e=t.getComponent())?void 0:e.type)!=="VERSION")return null;var e,i=t.getImmediate();return"".concat(i.library,"/").concat(i.version)}).filter(function(t){return t}).join(" ")}}]),t}(),tY="@firebase/app",tz="0.10.10",tX=new tO("@firebase/app"),tK="[DEFAULT]",tJ=(_(l={},tY,"fire-core"),_(l,"@firebase/app-compat","fire-core-compat"),_(l,"@firebase/analytics","fire-analytics"),_(l,"@firebase/analytics-compat","fire-analytics-compat"),_(l,"@firebase/app-check","fire-app-check"),_(l,"@firebase/app-check-compat","fire-app-check-compat"),_(l,"@firebase/auth","fire-auth"),_(l,"@firebase/auth-compat","fire-auth-compat"),_(l,"@firebase/database","fire-rtdb"),_(l,"@firebase/database-compat","fire-rtdb-compat"),_(l,"@firebase/functions","fire-fn"),_(l,"@firebase/functions-compat","fire-fn-compat"),_(l,"@firebase/installations","fire-iid"),_(l,"@firebase/installations-compat","fire-iid-compat"),_(l,"@firebase/messaging","fire-fcm"),_(l,"@firebase/messaging-compat","fire-fcm-compat"),_(l,"@firebase/performance","fire-perf"),_(l,"@firebase/performance-compat","fire-perf-compat"),_(l,"@firebase/remote-config","fire-rc"),_(l,"@firebase/remote-config-compat","fire-rc-compat"),_(l,"@firebase/storage","fire-gcs"),_(l,"@firebase/storage-compat","fire-gcs-compat"),_(l,"@firebase/firestore","fire-fst"),_(l,"@firebase/firestore-compat","fire-fst-compat"),_(l,"@firebase/vertexai-preview","fire-vertex"),_(l,"fire-js","fire-js"),_(l,"firebase","fire-js-all"),l),tq=new Map,t$=new Map,tZ=new Map;function tQ(t,e){try{t.container.addComponent(e)}catch(i){tX.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),i)}}function t0(t){var e=t.name;if(tZ.has(e))return tX.debug("There were multiple attempts to register component ".concat(e,".")),!1;tZ.set(e,t);var i=!0,n=!1,s=void 0;try{for(var r,a=tq.values()[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var o=r.value;tQ(o,t)}}catch(t){n=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}var c=!0,h=!1,u=void 0;try{for(var l,d=t$.values()[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var f=l.value;tQ(f,t)}}catch(t){h=!0,u=t}finally{try{c||null==d.return||d.return()}finally{if(h)throw u}}return!0}function t1(t,e){var i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}var t2=new tg("app","Firebase",(_(d={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),_(d,"bad-app-name","Illegal App name: '{$appName}'"),_(d,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),_(d,"app-deleted","Firebase App named '{$appName}' already deleted"),_(d,"server-app-deleted","Firebase Server App has been deleted"),_(d,"no-options","Need to provide options, when not being deployed to hosting via source."),_(d,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_(d,"invalid-log-argument","First argument to `onLog` must be null or a function."),_(d,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),_(d,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),_(d,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),_(d,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),_(d,"finalization-registry-not-supported","FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry."),_(d,"invalid-server-app-environment","FirebaseServerApp is not for use in browser environments."),d)),t3=function(){function t(e,i,n){var s=this;D(this,t),this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tE("app",function(){return s},"PUBLIC"))}return A(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(t){this._isDeleted=t}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw t2.create("app-deleted",{appName:this._name})}}]),t}();function t4(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t;"object"!=typeof e&&(e={name:e});var n=Object.assign({name:tK,automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw t2.create("bad-app-name",{appName:String(s)});if(i||(i=tu()),!i)throw t2.create("no-options");var r=tq.get(s);if(r){if(tv(i,r.options)&&tv(n,r.config))return r;throw t2.create("duplicate-app",{appName:s})}var a=new tC(s),o=!0,c=!1,h=void 0;try{for(var u,l=tZ.values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var d=u.value;a.addComponent(d)}}catch(t){c=!0,h=t}finally{try{o||null==l.return||l.return()}finally{if(c)throw h}}var f=new t3(i,n,a);return tq.set(s,f),f}function t5(t,e,i){var n,s=null!==(n=tJ[t])&&void 0!==n?n:t;i&&(s+="-".concat(i));var r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){var o=['Unable to register library "'.concat(s,'" with version "').concat(e,'":')];r&&o.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),r&&a&&o.push("and"),a&&o.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),tX.warn(o.join(" "));return}t0(new tE("".concat(s,"-version"),function(){return{library:s,version:e}},"VERSION"))}var t6="firebase-heartbeat-store",t8=null;function t7(){return t8||(t8=tF("firebase-heartbeat-database",1,{upgrade:function(t,e){if(0===e)try{t.createObjectStore(t6)}catch(t){console.warn(t)}}}).catch(function(t){throw t2.create("idb-open",{originalErrorMessage:t.message})})),t8}function t9(){return(t9=C(function(t){var e,i,n,s;return B(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,t7()];case 1:return[4,(e=r.sent().transaction(t6)).objectStore(t6).get(ei(t))];case 2:return i=r.sent(),[4,e.done];case 3:return r.sent(),[2,i];case 4:return(n=r.sent())instanceof tp?tX.warn(n.message):(s=t2.create("idb-get",{originalErrorMessage:null==n?void 0:n.message}),tX.warn(s.message)),[3,5];case 5:return[2]}})})).apply(this,arguments)}function et(t,e){return ee.apply(this,arguments)}function ee(){return(ee=C(function(t,e){var i,n,s;return B(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,t7()];case 1:return[4,(i=r.sent().transaction(t6,"readwrite")).objectStore(t6).put(e,ei(t))];case 2:return r.sent(),[4,i.done];case 3:return r.sent(),[3,5];case 4:return(n=r.sent())instanceof tp?tX.warn(n.message):(s=t2.create("idb-set",{originalErrorMessage:null==n?void 0:n.message}),tX.warn(s.message)),[3,5];case 5:return[2]}})})).apply(this,arguments)}function ei(t){return"".concat(t.name,"!").concat(t.options.appId)}var en=function(){function t(e){var i=this;D(this,t),this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new er(n),this._heartbeatsCachePromise=this._storage.read().then(function(t){return i._heartbeatsCache=t,t})}return A(t,[{key:"triggerHeartbeat",value:function(){var t=this;return C(function(){var e,i,n,s,r;return B(this,function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),n=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=es(),(null===(e=t._heartbeatsCache)||void 0===e?void 0:e.heartbeats)!=null)return[3,2];return[4,t._heartbeatsCachePromise];case 1:if(t._heartbeatsCache=a.sent(),(null===(i=t._heartbeatsCache)||void 0===i?void 0:i.heartbeats)==null)return[2];a.label=2;case 2:if(t._heartbeatsCache.lastSentHeartbeatDate===s||t._heartbeatsCache.heartbeats.some(function(t){return t.date===s}))return[2];return t._heartbeatsCache.heartbeats.push({date:s,agent:n}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(function(t){var e=new Date(t.date).valueOf();return Date.now()-e<=2592e6}),[2,t._storage.overwrite(t._heartbeatsCache)];case 3:return r=a.sent(),tX.warn(r),[3,4];case 4:return[2]}})})()}},{key:"getHeartbeatsHeader",value:function(){var t=this;return C(function(){var e,i,n,s,r,a,o;return B(this,function(c){switch(c.label){case 0:if(c.trys.push([0,6,,7]),null!==t._heartbeatsCache)return[3,2];return[4,t._heartbeatsCachePromise];case 1:c.sent(),c.label=2;case 2:if((null===(e=t._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===t._heartbeatsCache.heartbeats.length)return[2,""];if(i=es(),s=(n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=[],n=t.slice(),s=!0,r=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var h=function(){var t=o.value,s=i.find(function(e){return e.agent===t.agent});if(s){if(s.dates.push(t.date),ea(i)>e)return s.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),ea(i)>e)return i.pop(),"break";n=n.slice(1)}();if("break"===h)break}}catch(t){r=!0,a=t}finally{try{s||null==c.return||c.return()}finally{if(r)throw a}}return{heartbeatsToSend:i,unsentEntries:n}}(t._heartbeatsCache.heartbeats)).heartbeatsToSend,r=n.unsentEntries,a=tr(JSON.stringify({version:2,heartbeats:s})),t._heartbeatsCache.lastSentHeartbeatDate=i,!(r.length>0))return[3,4];return t._heartbeatsCache.heartbeats=r,[4,t._storage.overwrite(t._heartbeatsCache)];case 3:return c.sent(),[3,5];case 4:t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache),c.label=5;case 5:return[2,a];case 6:return o=c.sent(),tX.warn(o),[2,""];case 7:return[2]}})})()}}]),t}();function es(){return new Date().toISOString().substring(0,10)}var er=function(){function t(e){D(this,t),this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return A(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){return C(function(){return B(this,function(t){return td()?[2,tf().then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})()}},{key:"read",value:function(){var t=this;return C(function(){var e;return B(this,function(i){switch(i.label){case 0:return[4,t._canUseIndexedDBPromise];case 1:if(i.sent())return[3,2];return[2,{heartbeats:[]}];case 2:return[4,function(t){return t9.apply(this,arguments)}(t.app)];case 3:if(null==(e=i.sent())?void 0:e.heartbeats)return[2,e];return[2,{heartbeats:[]}];case 4:return[2]}})})()}},{key:"overwrite",value:function(t){var e=this;return C(function(){var i,n;return B(this,function(s){switch(s.label){case 0:return[4,e._canUseIndexedDBPromise];case 1:if(s.sent())return[3,2];return[2];case 2:return[4,e.read()];case 3:return n=s.sent(),[2,et(e.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})];case 4:return[2]}})})()}},{key:"add",value:function(t){var e=this;return C(function(){var i,n;return B(this,function(s){switch(s.label){case 0:return[4,e._canUseIndexedDBPromise];case 1:if(s.sent())return[3,2];return[2];case 2:return[4,e.read()];case 3:return n=s.sent(),[2,et(e.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:n.lastSentHeartbeatDate,heartbeats:N(n.heartbeats).concat(N(t.heartbeats))})];case 4:return[2]}})})()}}]),t}();function ea(t){return tr(JSON.stringify({version:2,heartbeats:t})).length}t0(new tE("platform-logger",function(t){return new tV(t)},"PRIVATE")),t0(new tE("heartbeat",function(t){return new en(t)},"PRIVATE")),t5(tY,tz,""),t5(tY,tz,"esm2017"),t5("fire-js",""),t5("firebase","10.13.1","app");var eo="@firebase/installations",ec="0.6.8",eh="w:".concat(ec),eu="FIS_v2",el=new tg("installations","Installations",(_(f={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),_(f,"not-registered","Firebase Installation is not registered."),_(f,"installation-not-found","Firebase Installation not found."),_(f,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),_(f,"app-offline","Could not process request. Application offline."),_(f,"delete-pending-registration","Can't delete installation while there is a pending registration request."),f));function ed(t){return t instanceof tp&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){var e=t.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(e,"/installations")}function ep(t){return{token:t.token,requestStatus:2,expiresIn:Number(t.expiresIn.replace("s","000")),creationTime:Date.now()}}function eg(t,e){return em.apply(this,arguments)}function em(){return(em=C(function(t,e){var i;return B(this,function(n){switch(n.label){case 0:return[4,e.json()];case 1:return i=n.sent().error,[2,el.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})]}})})).apply(this,arguments)}function ev(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function ey(t){return eI.apply(this,arguments)}function eI(){return(eI=C(function(t){var e;return B(this,function(i){switch(i.label){case 0:return[4,t()];case 1:if((e=i.sent()).status>=500&&e.status<600)return[2,t()];return[2,e]}})})).apply(this,arguments)}function eT(){return(eT=C(function(t,e){var i,n,s,r,a,o,c,h,u,l,d;return B(this,function(f){switch(f.label){case 0:if(i=t.appConfig,n=t.heartbeatServiceProvider,s=e.fid,r=ef(i),a=ev(i),!(o=n.getImmediate({optional:!0})))return[3,2];return[4,o.getHeartbeatsHeader()];case 1:(c=f.sent())&&a.append("x-firebase-client",c),f.label=2;case 2:return h={fid:s,authVersion:eu,appId:i.appId,sdkVersion:eh},u={method:"POST",headers:a,body:JSON.stringify(h)},[4,ey(function(){return fetch(r,u)})];case 3:if(!(l=f.sent()).ok)return[3,5];return[4,l.json()];case 4:return[2,{fid:(d=f.sent()).fid||s,registrationStatus:2,refreshToken:d.refreshToken,authToken:ep(d.authToken)}];case 5:return[4,eg("Create Installation",l)];case 6:throw f.sent();case 7:return[2]}})})).apply(this,arguments)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){return new Promise(function(e){setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eb=/^[cdef][\w-]{21}$/;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){return"".concat(t.appName,"!").concat(t.appId)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eC=new Map;function eD(t,e){var i,n=eS(t);ew(n,e),!eA&&"BroadcastChannel"in self&&((eA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){ew(t.data.key,t.data.fid)}),(i=eA)&&i.postMessage({key:n,fid:e}),0===eC.size&&eA&&(eA.close(),eA=null)}function ew(t,e){var i=eC.get(t);if(i){var n=!0,s=!1,r=void 0;try{for(var a,o=i[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)(0,a.value)(e)}catch(t){s=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}}}var eA=null,e_="firebase-installations-store",eP=null;function eO(){return eP||(eP=tF("firebase-installations-database",1,{upgrade:function(t,e){0===e&&t.createObjectStore(e_)}})),eP}function ex(t,e){return eH.apply(this,arguments)}function eH(){return(eH=C(function(t,e){var i,n,s,r;return B(this,function(a){switch(a.label){case 0:return i=eS(t),[4,eO()];case 1:return[4,(s=(n=a.sent().transaction(e_,"readwrite")).objectStore(e_)).get(i)];case 2:return r=a.sent(),[4,s.put(e,i)];case 3:return a.sent(),[4,n.done];case 4:return a.sent(),r&&r.fid===e.fid||eD(t,e.fid),[2,e]}})})).apply(this,arguments)}function eR(t){return eN.apply(this,arguments)}function eN(){return(eN=C(function(t){var e,i;return B(this,function(n){switch(n.label){case 0:return e=eS(t),[4,eO()];case 1:return[4,(i=n.sent().transaction(e_,"readwrite")).objectStore(e_).delete(e)];case 2:return n.sent(),[4,i.done];case 3:return n.sent(),[2]}})})).apply(this,arguments)}function eM(t,e){return eL.apply(this,arguments)}function eL(){return(eL=C(function(t,e){var i,n,s,r,a;return B(this,function(o){switch(o.label){case 0:return i=eS(t),[4,eO()];case 1:return[4,(s=(n=o.sent().transaction(e_,"readwrite")).objectStore(e_)).get(i)];case 2:if(void 0!==(a=e(r=o.sent())))return[3,4];return[4,s.delete(i)];case 3:return o.sent(),[3,6];case 4:return[4,s.put(a,i)];case 5:o.sent(),o.label=6;case 6:return[4,n.done];case 7:return o.sent(),a&&(!r||r.fid!==a.fid)&&eD(t,a.fid),[2,a]}})})).apply(this,arguments)}function ek(t){return eB.apply(this,arguments)}function eB(){return(eB=C(function(t){var e,i,n;return B(this,function(s){switch(s.label){case 0:return[4,eM(t.appConfig,function(i){var n=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(el.create("app-offline"))};var i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=function(t,e){return eF.apply(this,arguments)}(t,i);return{installationEntry:i,registrationPromise:n}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(t){return eU.apply(this,arguments)}(t)}:{installationEntry:e}}(t,eW(i||{fid:function(){try{var t,e,i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;var n=(t=i,btoa((e=String).fromCharCode.apply(e,N(t))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return eb.test(n)?n:""}catch(t){return""}}(),registrationStatus:0}));return e=n.registrationPromise,n.installationEntry})];case 1:if(""!==(i=s.sent()).fid)return[3,3];return n={},[4,e];case 2:return[2,(n.installationEntry=s.sent(),n)];case 3:return[2,{installationEntry:i,registrationPromise:e}]}})})).apply(this,arguments)}function eF(){return(eF=C(function(t,e){var i,n;return B(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,7]),[4,function(t,e){return eT.apply(this,arguments)}(t,e)];case 1:return i=s.sent(),[2,ex(t.appConfig,i)];case 2:if(!(ed(n=s.sent())&&409===n.customData.serverCode))return[3,4];return[4,eR(t.appConfig)];case 3:return s.sent(),[3,6];case 4:return[4,ex(t.appConfig,{fid:e.fid,registrationStatus:0})];case 5:s.sent(),s.label=6;case 6:throw n;case 7:return[2]}})})).apply(this,arguments)}function eU(){return(eU=C(function(t){var e,i,n,s;return B(this,function(r){switch(r.label){case 0:return[4,eG(t.appConfig)];case 1:e=r.sent(),r.label=2;case 2:if(1!==e.registrationStatus)return[3,5];return[4,eE(100)];case 3:return r.sent(),[4,eG(t.appConfig)];case 4:return e=r.sent(),[3,2];case 5:if(0!==e.registrationStatus)return[3,7];return[4,ek(t)];case 6:if(n=(i=r.sent()).installationEntry,s=i.registrationPromise)return[2,s];return[2,n];case 7:return[2,e]}})})).apply(this,arguments)}function eG(t){return eM(t,function(t){if(!t)throw el.create("installation-not-found");return eW(t)})}function eW(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t}function ej(){return(ej=C(function(t,e){var i,n,s,r,a,o,c,h,u;return B(this,function(l){switch(l.label){case 0:var d,f,p,g,m;if(i=t.appConfig,n=t.heartbeatServiceProvider,g=i,m=e.fid,s="".concat(ef(g),"/").concat(m,"/authTokens:generate"),d=i,f=e.refreshToken,(p=ev(d)).append("Authorization","".concat(eu," ").concat(f)),r=p,!(a=n.getImmediate({optional:!0})))return[3,2];return[4,a.getHeartbeatsHeader()];case 1:(o=l.sent())&&r.append("x-firebase-client",o),l.label=2;case 2:return c={installation:{sdkVersion:eh,appId:i.appId}},h={method:"POST",headers:r,body:JSON.stringify(c)},[4,ey(function(){return fetch(s,h)})];case 3:if(!(u=l.sent()).ok)return[3,5];return[4,u.json()];case 4:return[2,ep(l.sent())];case 5:return[4,eg("Generate Auth Token",u)];case 6:throw l.sent();case 7:return[2]}})})).apply(this,arguments)}function eV(t){return eY.apply(this,arguments)}function eY(){return(eY=C(function(t){var e,i,n,s,r=arguments;return B(this,function(a){switch(a.label){case 0:return e=r.length>1&&void 0!==r[1]&&r[1],[4,eM(t.appConfig,function(n){if(!eJ(n))throw el.create("not-registered");var s,r,a,o,c=n.authToken;if(!e&&2===(s=c).requestStatus&&(r=s,!((a=Date.now())<r.creationTime)&&!(r.creationTime+r.expiresIn<a+36e5)))return n;if(1===c.requestStatus)return i=function(t,e){return ez.apply(this,arguments)}(t,e),n;if(!navigator.onLine)throw el.create("app-offline");var h=(o={requestStatus:1,requestTime:Date.now()},Object.assign(Object.assign({},n),{authToken:o}));return i=function(t,e){return eK.apply(this,arguments)}(t,h),h})];case 1:if(n=a.sent(),!i)return[3,3];return[4,i];case 2:return s=a.sent(),[3,4];case 3:s=n.authToken,a.label=4;case 4:return[2,s]}})})).apply(this,arguments)}function ez(){return(ez=C(function(t,e){var i,n;return B(this,function(s){switch(s.label){case 0:return[4,eX(t.appConfig)];case 1:i=s.sent(),s.label=2;case 2:if(1!==i.authToken.requestStatus)return[3,5];return[4,eE(100)];case 3:return s.sent(),[4,eX(t.appConfig)];case 4:return i=s.sent(),[3,2];case 5:if(0===(n=i.authToken).requestStatus)return[2,eV(t,e)];return[2,n]}})})).apply(this,arguments)}function eX(t){return eM(t,function(t){var e;if(!eJ(t))throw el.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function eK(){return(eK=C(function(t,e){var i,n,s,r;return B(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,function(t,e){return ej.apply(this,arguments)}(t,e)];case 1:return i=a.sent(),n=Object.assign(Object.assign({},e),{authToken:i}),[4,ex(t.appConfig,n)];case 2:return a.sent(),[2,i];case 3:if(!(ed(s=a.sent())&&(401===s.customData.serverCode||404===s.customData.serverCode)))return[3,5];return[4,eR(t.appConfig)];case 4:return a.sent(),[3,7];case 5:return r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}),[4,ex(t.appConfig,r)];case 6:a.sent(),a.label=7;case 7:throw s;case 8:return[2]}})})).apply(this,arguments)}function eJ(t){return void 0!==t&&2===t.registrationStatus}function eq(){return(eq=C(function(t){var e,i,n,s;return B(this,function(r){switch(r.label){case 0:return[4,ek(e=t)];case 1:return n=(i=r.sent()).installationEntry,(s=i.registrationPromise)?s.catch(console.error):eV(e).catch(console.error),[2,n.fid]}})})).apply(this,arguments)}function e$(){return(e$=C(function(t){var e,i,n=arguments;return B(this,function(s){switch(s.label){case 0:return e=n.length>1&&void 0!==n[1]&&n[1],[4,function(t){return eZ.apply(this,arguments)}(i=t)];case 1:return s.sent(),[4,eV(i,e)];case 2:return[2,s.sent().token]}})})).apply(this,arguments)}function eZ(){return(eZ=C(function(t){var e;return B(this,function(i){switch(i.label){case 0:return[4,ek(t)];case 1:if(!(e=i.sent().registrationPromise))return[3,3];return[4,e];case 2:i.sent(),i.label=3;case 3:return[2]}})})).apply(this,arguments)}function eQ(t){return el.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e0="installations";t0(new tE(e0,function(t){var e=t.getProvider("app").getImmediate(),i=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){if(!t||!t.options)throw eQ("App Configuration");if(!t.name)throw eQ("App Name");var e=!0,i=!1,n=void 0;try{for(var s,r=["projectId","apiKey","appId"][Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var a=s.value;if(!t.options[a])throw eQ(a)}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),n=t1(e,"heartbeat");return{app:e,appConfig:i,heartbeatServiceProvider:n,_delete:function(){return Promise.resolve()}}},"PUBLIC")),t0(new tE("installations-internal",function(t){var e=t1(t.getProvider("app").getImmediate(),e0).getImmediate();return{getId:function(){return function(t){return eq.apply(this,arguments)}(e)},getToken:function(t){return function(t){return e$.apply(this,arguments)}(e,t)}}},"PRIVATE")),t5(eo,ec),t5(eo,ec,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e1="analytics",e2="https://www.googletagmanager.com/gtag/js",e3=new tO("@firebase/analytics"),e4=new tg("analytics","Analytics",(_(p={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),_(p,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance."),_(p,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),_(p,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),_(p,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),_(p,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),_(p,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),_(p,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),_(p,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),_(p,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),_(p,"no-client-id",'The "client_id" field is empty.'),_(p,"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}."),p));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){if(!t.startsWith(e2)){var e=e4.create("invalid-gtag-resource",{gtagURL:t});return e3.warn(e.message),""}return t}function e6(t){return Promise.all(t.map(function(t){return t.catch(function(t){return t})}))}function e8(){return(e8=C(function(t,e,i,n,s,r){var a,o,c;return B(this,function(h){switch(h.label){case 0:a=n[s],h.label=1;case 1:if(h.trys.push([1,7,,8]),!a)return[3,3];return[4,e[a]];case 2:return h.sent(),[3,6];case 3:return[4,e6(i)];case 4:if(!(o=h.sent().find(function(t){return t.measurementId===s})))return[3,6];return[4,e[o.appId]];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),e3.error(c),[3,8];case 8:return t("config",s,r),[2]}})})).apply(this,arguments)}function e7(){return(e7=C(function(t,e,i,n,s){var r,a,o,c,h,u,l,d,f,p,g;return B(this,function(m){switch(m.label){case 0:if(m.trys.push([0,4,,5]),r=[],!(s&&s.send_to))return[3,2];return Array.isArray(a=s.send_to)||(a=[a]),[4,e6(i)];case 1:o=m.sent(),c=!0,h=!1,u=void 0;try{for(l=function(){var t=f.value,i=o.find(function(e){return e.measurementId===t}),n=i&&e[i.appId];if(!n)return r=[],"break";r.push(n)},d=a[Symbol.iterator]();!(c=(f=d.next()).done)&&(p=l(),"break"!==p);c=!0);}catch(t){h=!0,u=t}finally{try{c||null==d.return||d.return()}finally{if(h)throw u}}m.label=2;case 2:return 0===r.length&&(r=Object.values(e)),[4,Promise.all(r)];case 3:return m.sent(),t("event",n,s||{}),[3,5];case 4:return g=m.sent(),e3.error(g),[3,5];case 5:return[2]}})})).apply(this,arguments)}var e9=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;D(this,t),this.throttleMetadata=e,this.intervalMillis=i}return A(t,[{key:"getThrottleMetadata",value:function(t){return this.throttleMetadata[t]}},{key:"setThrottleMetadata",value:function(t,e){this.throttleMetadata[t]=e}},{key:"deleteThrottleMetadata",value:function(t){delete this.throttleMetadata[t]}}]),t}());function it(){return(it=C(function(t){var e,i,n,s,r,a;return B(this,function(o){switch(o.label){case 0:return i=t.appId,n={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":t.apiKey})},[4,fetch("https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",i),n)];case 1:if(!(200!==(s=o.sent()).status&&304!==s.status))return[3,6];r="",o.label=2;case 2:return o.trys.push([2,4,,5]),[4,s.json()];case 3:return(null===(e=(a=o.sent()).error)||void 0===e?void 0:e.message)&&(r=a.error.message),[3,5];case 4:return o.sent(),[3,5];case 5:throw e4.create("config-fetch-failed",{httpStatus:s.status,responseMessage:r});case 6:return[2,s.json()]}})})).apply(this,arguments)}function ie(){return(ie=C(function(t){var e,i,n,s,r,a,o,c,h=arguments;return B(this,function(u){if(e=h.length>1&&void 0!==h[1]?h[1]:e9,i=h.length>2?h[2]:void 0,s=(n=t.options).appId,r=n.apiKey,a=n.measurementId,!s)throw e4.create("no-app-id");if(!r){if(a)return[2,{measurementId:a,appId:s}];throw e4.create("no-api-key")}return o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new ir,setTimeout(C(function(){return B(this,function(t){return c.abort(),[2]})}),void 0!==i?i:6e4),[2,ii({appId:s,apiKey:r,measurementId:a},o,c,e)]})})).apply(this,arguments)}function ii(t,e,i){return is.apply(this,arguments)}function is(){return(is=C(function(t,e,i){var n,s,r,a,o,c,h,u,l,d,f,p,g=arguments;return B(this,function(m){switch(m.label){case 0:n=e.throttleEndTimeMillis,s=e.backoffCount,r=g.length>3&&void 0!==g[3]?g[3]:e9,o=t.appId,c=t.measurementId,m.label=1;case 1:var v;return m.trys.push([1,3,,4]),[4,(v=n,new Promise(function(t,e){var n=setTimeout(t,Math.max(v-Date.now(),0));i.addEventListener(function(){clearTimeout(n),e(e4.create("fetch-throttle",{throttleEndTimeMillis:v}))})}))];case 2:return m.sent(),[3,4];case 3:if(h=m.sent(),c)return e3.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==h?void 0:h.message,"]")),[2,{appId:o,measurementId:c}];throw h;case 4:return m.trys.push([4,6,,7]),[4,function(t){return it.apply(this,arguments)}(t)];case 5:return u=m.sent(),r.deleteThrottleMetadata(o),[2,u];case 6:if(!function(t){if(!(t instanceof tp)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(d=l=m.sent())){if(r.deleteThrottleMetadata(o),c)return e3.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==d?void 0:d.message,"]")),[2,{appId:o,measurementId:c}];throw l}return f=503===Number(null===(a=null==d?void 0:d.customData)||void 0===a?void 0:a.httpStatus)?tI(s,r.intervalMillis,30):tI(s,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:s+1},r.setThrottleMetadata(o,p),e3.debug("Calling attemptFetch again in ".concat(f," millis")),[2,ii(t,p,i,r)];case 7:return[2]}})})).apply(this,arguments)}var ir=function(){function t(){D(this,t),this.listeners=[]}return A(t,[{key:"addEventListener",value:function(t){this.listeners.push(t)}},{key:"abort",value:function(){this.listeners.forEach(function(t){return t()})}}]),t}();function ia(){return(ia=C(function(t,e,i,n,s){var r;return B(this,function(a){switch(a.label){case 0:if(!(s&&s.global))return[3,1];return t("event",i,n),[2];case 1:return[4,e];case 2:r=a.sent(),t("event",i,Object.assign(Object.assign({},n),{send_to:r})),a.label=3;case 3:return[2]}})})).apply(this,arguments)}function io(){return(io=C(function(){var t;return B(this,function(e){switch(e.label){case 0:if(td())return[3,1];return e3.warn(e4.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1];case 1:return e.trys.push([1,3,,4]),[4,tf()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),e3.warn(e4.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),[2,!1];case 4:return[2,!0]}})})).apply(this,arguments)}function ic(){return(ic=C(function(t,e,i,n,s,r,a){var o,c,h,u,l,d;return B(this,function(f){switch(f.label){case 0:return(c=function(t){return ie.apply(this,arguments)}(t)).then(function(e){i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&e3.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return e3.error(t)}),e.push(c),[4,Promise.all([c,(function(){return io.apply(this,arguments)})().then(function(t){return t?n.getId():void 0})])];case 1:if(u=(h=F.apply(void 0,[f.sent(),2]))[0],l=h[1],!function(t){var e=window.document.getElementsByTagName("script"),i=!0,n=!1,s=void 0;try{for(var r,a=Object.values(e)[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var o=r.value;if(o.src&&o.src.includes(e2)&&o.src.includes(t))return o}}catch(t){n=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return null}(r)){var p,v,y,I,T,E,b;p=u.measurementId,v="firebase-js-sdk-policy",y={createScriptURL:e5},window.trustedTypes&&(I=window.trustedTypes.createPolicy(v,y)),T=I,E=document.createElement("script"),b="".concat(e2,"?l=").concat(r,"&id=").concat(p),E.src=T?null==T?void 0:T.createScriptURL(b):b,E.async=!0,document.head.appendChild(E)}return m&&(s("consent","default",m),m=void 0),s("js",new Date),(d=null!==(o=null==a?void 0:a.config)&&void 0!==o?o:{}).origin="firebase",d.update=!0,null!=l&&(d.firebase_id=l),s("config",u.measurementId,d),g&&(s("set",g),g=void 0),[2,u.measurementId]}})})).apply(this,arguments)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ih=function(){function t(e){D(this,t),this.app=e}return A(t,[{key:"_delete",value:function(){return delete iu[this.app.options.appId],Promise.resolve()}}]),t}(),iu={},il=[],id={},ip="dataLayer",ig=!1;function im(t,e,i,n){t=tT(t),(function(t,e,i,n,s){return ia.apply(this,arguments)})(y,iu[t.app.options.appId],e,i,n).catch(function(t){return e3.error(t)})}var iv="@firebase/analytics",iy="0.10.7";t0(new tE(e1,function(t,e){var i=e.options;return function(t,e,i){!function(){var t,e=[];if("object"==typeof(t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==t.id&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var i=e.map(function(t,e){return"(".concat(e+1,") ").concat(t)}).join(" "),n=e4.create("invalid-analytics-context",{errorInfo:i});e3.warn(n.message)}}();var n=t.options.appId;if(!n)throw e4.create("no-app-id");if(!t.options.apiKey){if(t.options.measurementId)e3.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(t.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw e4.create("no-api-key")}if(null!=iu[n])throw e4.create("already-exists",{id:n});if(!ig){s=[],Array.isArray(window[ip])?s=window[ip]:window[ip]=s;var s,r,a,o=(r="gtag",a=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];window[ip].push(arguments)},window[r]&&"function"==typeof window[r]&&(a=window[r]),window[r]=function(t,e,i,n){function s(){return(s=C(function(s){var r,a,o,c,h,u,l,d,f=arguments;return B(this,function(p){switch(p.label){case 0:for(a=Array((r=f.length)>1?r-1:0),o=1;o<r;o++)a[o-1]=f[o];p.label=1;case 1:if(p.trys.push([1,7,,8]),"event"!==s)return[3,3];return[4,function(t,e,i,n,s){return e7.apply(this,arguments)}(t,e,i,(c=F(a,2))[0],c[1])];case 2:case 4:return p.sent(),[3,6];case 3:if("config"!==s)return[3,5];return[4,function(t,e,i,n,s,r){return e8.apply(this,arguments)}(t,e,i,n,(h=F(a,2))[0],h[1])];case 5:"consent"===s?t("consent",(u=F(a,2))[0],u[1]):"get"===s?t("get",(l=F(a,3))[0],l[1],l[2]):"set"===s?t("set",F(a,1)[0]):t.apply(void 0,[s].concat(N(a))),p.label=6;case 6:return[3,8];case 7:return d=p.sent(),e3.error(d),[3,8];case 8:return[2]}})})).apply(this,arguments)}return function(t){return s.apply(this,arguments)}}(a,iu,il,id),{gtagCore:a,wrappedGtag:window[r]}),c=o.wrappedGtag,h=o.gtagCore;y=c,v=h,ig=!0}return iu[n]=function(t,e,i,n,s,r,a){return ic.apply(this,arguments)}(t,il,id,e,v,ip,i),new ih(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),i)},"PUBLIC")),t0(new tE("analytics-internal",function(t){try{var e=t.getProvider(e1).getImmediate();return{logEvent:function(t,i,n){return im(e,t,i,n)}}}catch(t){throw e4.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),t5(iv,iy),t5(iv,iy,"esm2017");var iI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tK,e=tq.get(t);if(!e&&t===tK&&tu())return t4();if(!e)throw t2.create("no-app",{appName:t});return e}(),e=t1(t=tT(t),e1);return e.isInitialized()?e.getImmediate():function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t1(t,e1);if(i.isInitialized()){var n=i.getImmediate();if(tv(e,i.getOptions()))return n;throw e4.create("already-initialized")}return i.initialize({options:e})}(t)}(t4({apiKey:"AIzaSyD94Kb3uvFAdklNjiHAc8z-BhJP0z5wza0",authDomain:"offline-dino-game.firebaseapp.com",databaseURL:"https://offline-dino-game.firebaseio.com",projectId:"offline-dino-game",storageBucket:"offline-dino-game.appspot.com",messagingSenderId:"811824417832",appId:"1:811824417832:web:bf255feb3f3face09b391d",measurementId:"G-RRWBVBYNQJ"}));("offline-dino-game.firebaseapp.com"===window.location.hostname||"offline-dino-game.web.app"===window.location.hostname)&&(console.log("Redirecting to canonical domain..."),window.location.replace("https://dinosaurgame.app")),function(){function t(i,n){if(t.instance_)return t.instance_;t.instance_=this,this.outerContainerEl=document.querySelector(i),this.containerEl=null,this.snackbarEl=null,this.touchController=null,this.config=n||t.config,this.dimensions=t.defaultDimensions,this.canvas=null,this.canvasCtx=null,this.tRex=null,this.distanceMeter=null,this.distanceRan=0,this.highestScore=parseInt(localStorage.getItem("highScore"),10)||0,this.syncHighestScore=!0,this.time=0,this.runningTime=0,this.msPerFrame=1e3/e,this.currentSpeed=this.config.SPEED,this.obstacles=[],this.activated=!1,this.playing=!1,this.crashed=!1,this.paused=!1,this.inverted=!1,this.invertTimer=0,this.resizeTimerId_=null,this.bdayFlashTimer=null,this.playCount=0,this.audioBuffer=null,this.soundFx={},this.audioContext=null,this.images={},this.imagesLoaded=0,this.pollingGamepads=!1,this.gamepadIndex=void 0,this.previousGamepad=null,this.loadImages()}window.Runner=t;var e=60,i=window.devicePixelRatio>1,n=/CriOS/.test(window.navigator.userAgent),s=/Android/.test(window.navigator.userAgent)||n;function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}function a(){return n?new Date().getTime():performance.now()}function o(t,e,i,n){this.canvas=t,this.canvasCtx=t.getContext("2d"),this.canvasDimensions=n,this.textImgPos=e,this.restartImgPos=i,this.draw()}function c(t,e){return new u(t.x+e.x,t.y+e.y,t.width,t.height)}function h(t,e){var i=!1;t.x,t.y;var n=e.x;return e.y,t.x<n+e.width&&t.x+t.width>n&&t.y<e.y+e.height&&t.height+t.y>e.y&&(i=!0),i}function u(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}function l(e,i,n,s,a,o,c){this.canvasCtx=e,this.spritePos=n,this.typeConfig=i,this.gapCoefficient=a,this.size=r(1,l.MAX_OBSTACLE_LENGTH),this.dimensions=s,this.remove=!1,this.xPos=s.WIDTH+(c||0),this.yPos=0,this.width=0,this.collisionBoxes=[],this.gap=0,this.speedOffset=0,this.imageSprite="SNACK"==this.typeConfig.type?t.bdayImageSprite:t.imageSprite,this.currentFrame=0,this.timer=0,this.init(o)}function d(i,n){this.canvas=i,this.canvasCtx=i.getContext("2d"),this.imageSprite=t.imageSprite,this.spritePos=n,this.xPos=0,this.yPos=0,this.xInitialPos=0,this.groundYPos=0,this.currentFrame=0,this.currentAnimFrames=[],this.blinkDelay=0,this.blinkCount=0,this.animStartTime=0,this.timer=0,this.msPerFrame=1e3/e,this.config=d.config,this.status=d.status.WAITING,this.jumping=!1,this.ducking=!1,this.jumpVelocity=0,this.reachedMinHeight=!1,this.speedDrop=!1,this.jumpCount=0,this.jumpspotX=0,this.bdayModeActive=!1,this.flashing=!1,this.init()}function f(e,i,n){this.canvas=e,this.canvasCtx=e.getContext("2d"),this.image=t.imageSprite,this.spritePos=i,this.x=0,this.y=5,this.currentDistance=0,this.maxScore=0,this.highScore=["10","11",""],this.container=null,this.digits=[],this.achievement=!1,this.defaultString="",this.flashTimer=0,this.flashIterations=0,this.invertTrigger=!1,this.flashingRafId=null,this.highScoreBounds={},this.highScoreFlashing=!1,this.config=f.config,this.maxScoreUnits=this.config.MAX_DISTANCE_UNITS,this.init(n),this.setHighScore(parseInt(window.localStorage.getItem("highScore"),10)||0)}function p(e,i,n,s){this.canvas=e,this.canvasCtx=this.canvas.getContext("2d"),this.spritePos=i,this.containerWidth=n,this.xPos=n,this.yPos=0,this.remove=!1,this.cloudGap=r(p.config.MIN_CLOUD_GAP,p.config.MAX_CLOUD_GAP),this.isBalloon=s,this.imageSprite=s?t.bdayImageSprite:t.imageSprite,this.init()}function g(t,e,i){this.spritePos=e,this.canvas=t,this.canvasCtx=t.getContext("2d"),this.xPos=i-50,this.yPos=30,this.currentPhase=0,this.opacity=0,this.containerWidth=i,this.stars=[],this.drawStars=!1,this.placeStars()}function m(t,e){this.spritePos=e,this.canvas=t,this.canvasCtx=t.getContext("2d"),this.sourceDimensions={},this.dimensions=m.dimensions,this.sourceXPos=[this.spritePos.x,this.spritePos.x+this.dimensions.WIDTH],this.xPos=[],this.yPos=0,this.bumpThreshold=.5,this.setSourceDimensions(),this.draw()}function v(t,e,i,n){this.canvas=t,this.canvasCtx=this.canvas.getContext("2d"),this.config=v.config,this.dimensions=i,this.gapCoefficient=n,this.obstacles=[],this.obstacleHistory=[],this.horizonOffsets=[0,0],this.cloudFrequency=this.config.CLOUD_FREQUENCY,this.spritePos=e,this.nightMode=null,this.bdayModeActive=!1,this.clouds=[],this.cloudSpeed=this.config.BG_CLOUD_SPEED,this.horizonLine=null,this.init()}t.config={ACCELERATION:.001,BG_CLOUD_SPEED:.2,BOTTOM_PAD:10,CANVAS_IN_VIEW_OFFSET:-10,BOTTOM_PAD_BDAY:26,BDAY_FLASH_DURATION:1e3,BDAY_Y_POS_ADJUST:16,CLEAR_TIME:3e3,CLOUD_FREQUENCY:.5,GAMEOVER_CLEAR_TIME:750,GAP_COEFFICIENT:.6,GRAVITY:.6,INITIAL_JUMP_VELOCITY:12,INVERT_FADE_DURATION:12e3,INVERT_DISTANCE:700,MAX_BLINK_COUNT:3,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_OBSTACLE_DUPLICATION:2,MAX_SPEED:13,MIN_JUMP_HEIGHT:35,MOBILE_SPEED_COEFFICIENT:1.2,RESOURCE_TEMPLATE_ID:"audio-resources",SPEED:6,SPEED_DROP_COEFFICIENT:3,ARCADE_MODE_INITIAL_TOP_POSITION:35,ARCADE_MODE_TOP_POSITION_PERCENT:.1},t.defaultDimensions={WIDTH:600,HEIGHT:150},t.classes={ARCADE_MODE:"arcade-mode",CANVAS:"runner-canvas",CONTAINER:"runner-container",CRASHED:"crashed",ICON:"icon-offline",INVERTED:"inverted",SNACKBAR:"snackbar",SNACKBAR_SHOW:"snackbar-show",TOUCH_CONTROLLER:"controller"},t.spriteDefinition={LDPI:{BALLOON:{x:417,y:29},CACTUS_LARGE:{x:332,y:2},CACTUS_SMALL:{x:228,y:2},CLOUD:{x:86,y:2},HORIZON:{x:2,y:54},MOON:{x:484,y:2},PTERODACTYL:{x:134,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:655,y:2},TREX:{x:848,y:2},TREX_BDAY:{x:0,y:0},SNACK:{x:384,y:22},STAR:{x:645,y:2}},HDPI:{BALLOON:{x:834,y:58},CACTUS_LARGE:{x:652,y:2},CACTUS_SMALL:{x:446,y:2},CLOUD:{x:166,y:2},HORIZON:{x:2,y:104},MOON:{x:954,y:2},PTERODACTYL:{x:260,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:1294,y:2},TREX:{x:1678,y:2},TREX_BDAY:{x:0,y:0},SNACK:{x:768,y:44},STAR:{x:1276,y:2}}},t.sounds={BUTTON_PRESS:"offline-sound-press",HIT:"offline-sound-hit",SCORE:"offline-sound-reached"},t.keycodes={JUMP:{38:1,32:1,87:1},DUCK:{40:1,83:1},RESTART:{13:1,32:1}},t.events={ANIM_END:"webkitAnimationEnd",CLICK:"click",KEYDOWN:"keydown",KEYUP:"keyup",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",RESIZE:"resize",TOUCHEND:"touchend",TOUCHSTART:"touchstart",VISIBILITY:"visibilitychange",BLUR:"blur",FOCUS:"focus",LOAD:"load",GAMEPADCONNECTED:"gamepadconnected"},t.prototype={isDisabled:function(){return!1},updateConfigSetting:function(t,e){if(t in this.config&&void 0!==e)switch(this.config[t]=e,t){case"GRAVITY":case"MIN_JUMP_HEIGHT":case"SPEED_DROP_COEFFICIENT":this.tRex.config[t]=e;break;case"INITIAL_JUMP_VELOCITY":this.tRex.setJumpVelocity(e);break;case"SPEED":this.setSpeed(e)}},loadImages:function(){i?(t.imageSprite=document.getElementById("offline-resources-2x"),t.bdayImageSprite=document.getElementById("offline-resources-bday-2x"),this.spriteDef=t.spriteDefinition.HDPI):(t.imageSprite=document.getElementById("offline-resources-1x"),t.bdayImageSprite=document.getElementById("offline-resources-bday-1x"),this.spriteDef=t.spriteDefinition.LDPI),t.imageSprite.complete?this.init():t.imageSprite.addEventListener(t.events.LOAD,this.init.bind(this))},loadSounds:function(){if(!n){this.audioContext=new AudioContext;var e=document.getElementById(this.config.RESOURCE_TEMPLATE_ID).content;for(var i in t.sounds){var s=e.getElementById(t.sounds[i]).src,r=function(t){for(var e=t.length/4*3,i=atob(t),n=new Uint8Array(new ArrayBuffer(e)),s=0;s<e;s++)n[s]=i.charCodeAt(s);return n.buffer}(s=s.substr(s.indexOf(",")+1));this.audioContext.decodeAudioData(r,(function(t,e){this.soundFx[t]=e}).bind(this,i))}}},setSpeed:function(t){var e=t||this.currentSpeed;if(this.dimensions.WIDTH<600){var i=e*this.dimensions.WIDTH/600*this.config.MOBILE_SPEED_COEFFICIENT;this.currentSpeed=i>e?e:i}else t&&(this.currentSpeed=t)},init:function(){var e,i,n,s,r,a=this;this.adjustDimensions(),this.setSpeed(),this.containerEl=document.createElement("div"),this.containerEl.className=t.classes.CONTAINER,this.canvas=(e=this.containerEl,i=this.dimensions.WIDTH,n=this.dimensions.HEIGHT,s=t.classes.PLAYER,(r=document.createElement("canvas")).className=s?t.classes.CANVAS+" "+s:t.classes.CANVAS,r.width=i,r.height=n,e.appendChild(r),r),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.fillStyle="#f7f7f7",this.canvasCtx.fill(),t.updateCanvasScaling(this.canvas),this.horizon=new v(this.canvas,this.spriteDef,this.dimensions,this.config.GAP_COEFFICIENT),this.distanceMeter=new f(this.canvas,this.spriteDef.TEXT_SPRITE,this.dimensions.WIDTH),this.tRex=new d(this.canvas,this.spriteDef.TREX),this.outerContainerEl.appendChild(this.containerEl),this.startListening(),this.update(),window.addEventListener(t.events.RESIZE,this.debounceResize.bind(this));var o=window.matchMedia("(prefers-color-scheme: dark)");this.isDarkMode=o&&o.matches,o.addListener(function(t){a.isDarkMode=t.matches})},createTouchController:function(){this.touchController=document.createElement("div"),this.touchController.className=t.classes.TOUCH_CONTROLLER,this.touchController.addEventListener(t.events.TOUCHSTART,this),this.touchController.addEventListener(t.events.TOUCHEND,this),this.outerContainerEl.appendChild(this.touchController)},debounceResize:function(){this.resizeTimerId_||(this.resizeTimerId_=setInterval(this.adjustDimensions.bind(this),250))},adjustDimensions:function(){clearInterval(this.resizeTimerId_),this.resizeTimerId_=null;var e=window.getComputedStyle(this.outerContainerEl),i=Number(e.paddingLeft.substr(0,e.paddingLeft.length-2));this.dimensions.WIDTH=this.outerContainerEl.offsetWidth-2*i,this.isArcadeMode()&&(this.dimensions.WIDTH=Math.min(600,this.dimensions.WIDTH),this.activated&&this.setArcadeModeContainerScale()),this.canvas&&(this.canvas.width=this.dimensions.WIDTH,this.canvas.height=this.dimensions.HEIGHT,t.updateCanvasScaling(this.canvas),this.distanceMeter.calcXPos(this.dimensions.WIDTH),this.clearCanvas(),this.horizon.update(0,0,!0),this.tRex.update(0),this.playing||this.crashed||this.paused?(this.containerEl.style.width=this.dimensions.WIDTH+"px",this.containerEl.style.height=this.dimensions.HEIGHT+"px",this.distanceMeter.update(0,Math.ceil(this.distanceRan)),this.stop()):this.tRex.draw(0,0),this.crashed&&this.gameOverPanel&&(this.gameOverPanel.updateDimensions(this.dimensions.WIDTH),this.gameOverPanel.draw()))},playIntro:function(){if(this.activated||this.crashed)this.crashed&&this.restart();else{this.playingIntro=!0,this.tRex.playingIntro=!0;var e="@-webkit-keyframes intro { from { width:"+d.config.WIDTH+"px }to { width: "+this.dimensions.WIDTH+"px }}";document.styleSheets[0].insertRule(e,0),this.containerEl.addEventListener(t.events.ANIM_END,this.startGame.bind(this)),this.containerEl.style.webkitAnimation="intro .4s ease-out 1 both",this.containerEl.style.width=this.dimensions.WIDTH+"px",this.setPlayStatus(!0),this.activated=!0}},startGame:function(){im(iI,"level_start",{play_count:this.playCount}),this.isArcadeMode()&&this.setArcadeMode(),this.runningTime=0,this.playingIntro=!1,this.tRex.playingIntro=!1,this.containerEl.style.webkitAnimation="",this.playCount++,document.addEventListener(t.events.VISIBILITY,this.onVisibilityChange.bind(this)),window.addEventListener(t.events.BLUR,this.onVisibilityChange.bind(this)),window.addEventListener(t.events.FOCUS,this.onVisibilityChange.bind(this))},clearCanvas:function(){this.canvasCtx.clearRect(0,0,this.dimensions.WIDTH,this.dimensions.HEIGHT)},isCanvasInView:function(){return this.containerEl.getBoundingClientRect().top>t.config.CANVAS_IN_VIEW_OFFSET},update:function(){this.updatePending=!1;var e=a(),i=e-(this.time||e);if(null!=this.bdayFlashTimer&&(this.bdayFlashTimer<=0?(this.bdayFlashTimer=null,this.tRex.setFlashing(!1),this.tRex.enableBdayMode(this.spriteDef.TREX_BDAY)):(this.bdayFlashTimer-=i,this.tRex.update(i),i=0)),this.time=e,this.playing){this.clearCanvas(),this.tRex.jumping&&this.tRex.updateJump(i),this.runningTime+=i;var n=this.runningTime>this.config.CLEAR_TIME;if(1!==this.tRex.jumpCount||this.playingIntro||this.playIntro(),this.playingIntro)this.horizon.update(0,this.currentSpeed,n);else{var s=this.isDarkMode^this.inverted;i=this.activated?i:0,this.horizon.update(i,this.currentSpeed,n,this.inverted,s)}var r=n&&function(e,i,n){t.defaultDimensions.WIDTH,e.xPos;var s=new u(i.xPos+1,i.yPos+1,i.config.WIDTH-2,(i.bdayModeActive?i.config.HEIGHT_BDAY:i.config.HEIGHT)-2),r=new u(e.xPos+1,e.yPos+1,e.typeConfig.width*e.size-2,e.typeConfig.height-2);if(h(s,r))for(var a=e.collisionBoxes,o=i.ducking?d.collisionBoxes.DUCKING:d.collisionBoxes.RUNNING,l=0;l<o.length;l++)for(var f=0;f<a.length;f++){var p,g,m,v=c(o[l],s),y=c(a[f],r),I=h(v,y);if(i.bdayModeActive&&(v.y+=t.config.BDAY_Y_POS_ADJUST),I)return[v,y]}}(this.horizon.obstacles[0],this.tRex);if(t.isBdayModeEnabled()&&r&&"SNACK"==this.horizon.obstacles[0].typeConfig.type&&(this.horizon.enableBdayMode(),this.tRex.setFlashing(!0),r=!1,this.bdayFlashTimer=this.config.BDAY_FLASH_DURATION),r?this.gameOver():(this.distanceRan+=this.currentSpeed*i/this.msPerFrame,this.currentSpeed<this.config.MAX_SPEED&&(this.currentSpeed+=this.config.ACCELERATION)),this.distanceMeter.update(i,Math.ceil(this.distanceRan))&&this.playSound(this.soundFx.SCORE),this.invertTimer>this.config.INVERT_FADE_DURATION)this.invertTimer=0,this.invertTrigger=!1,this.invert(!1);else if(this.invertTimer)this.invertTimer+=i;else{var o=this.distanceMeter.getActualDistance(Math.ceil(this.distanceRan));o>0&&(this.invertTrigger=!(o%this.config.INVERT_DISTANCE),this.invertTrigger&&0===this.invertTimer&&(this.invertTimer+=i,this.invert(!1)))}}(this.playing||!this.activated&&this.tRex.blinkCount<t.config.MAX_BLINK_COUNT)&&(this.tRex.update(i),this.scheduleNextUpdate())},handleEvent:function(e){return(function(t,i){switch(t){case i.KEYDOWN:case i.TOUCHSTART:case i.POINTERDOWN:this.onKeyDown(e);break;case i.KEYUP:case i.TOUCHEND:case i.POINTERUP:this.onKeyUp(e);break;case i.GAMEPADCONNECTED:this.onGamepadConnected(e)}}).bind(this)(e.type,t.events)},startListening:function(){document.addEventListener(t.events.KEYDOWN,this),document.addEventListener(t.events.KEYUP,this),this.containerEl.addEventListener(t.events.TOUCHSTART,this),document.addEventListener(t.events.POINTERDOWN,this),document.addEventListener(t.events.POINTERUP,this),this.isArcadeMode()&&window.addEventListener(t.events.GAMEPADCONNECTED,this)},stopListening:function(){document.removeEventListener(t.events.KEYDOWN,this),document.removeEventListener(t.events.KEYUP,this),this.touchController&&(this.touchController.removeEventListener(t.events.TOUCHSTART,this),this.touchController.removeEventListener(t.events.TOUCHEND,this)),this.containerEl.removeEventListener(t.events.TOUCHSTART,this),document.removeEventListener(t.events.POINTERDOWN,this),document.removeEventListener(t.events.POINTERUP,this),this.isArcadeMode()&&window.removeEventListener(t.events.GAMEPADCONNECTED,this)},onKeyDown:function(e){s&&this.playing&&e.preventDefault(),this.isCanvasInView()?this.crashed||this.paused?this.playing&&t.keycodes.DUCK[e.keyCode]&&(e.preventDefault(),this.tRex.jumping?this.tRex.setSpeedDrop():this.tRex.jumping||this.tRex.ducking||this.tRex.setDuck(!0)):((t.keycodes.JUMP[e.keyCode]||e.type===t.events.TOUCHSTART)&&(e.preventDefault(),this.playing||(this.touchController||e.type!==t.events.TOUCHSTART||this.createTouchController(),this.loadSounds(),this.setPlayStatus(!0),this.update())),this.tRex.jumping||this.tRex.ducking||(this.playSound(this.soundFx.BUTTON_PRESS),this.tRex.startJump(this.currentSpeed))):n&&this.crashed&&e.type===t.events.TOUCHSTART&&e.currentTarget===this.containerEl&&this.handleGameOverClicks(e)},onKeyUp:function(e){var i=String(e.keyCode),n=t.keycodes.JUMP[i]||e.type===t.events.TOUCHEND||e.type===t.events.POINTERUP;if(this.isRunning()&&n)this.tRex.endJump();else if(t.keycodes.DUCK[i])this.tRex.speedDrop=!1,this.tRex.setDuck(!1);else if(this.crashed){var s=a()-this.time;this.isCanvasInView()&&(t.keycodes.RESTART[i]||this.isLeftClickOnCanvas(e)||s>=this.config.GAMEOVER_CLEAR_TIME&&t.keycodes.JUMP[i])&&this.handleGameOverClicks(e)}else this.paused&&n&&(this.tRex.reset(),this.play())},onGamepadConnected:function(t){this.pollingGamepads||this.pollGamepadState()},pollGamepadState:function(){var t=navigator.getGamepads();this.pollActiveGamepad(t),this.pollingGamepads=!0,requestAnimationFrame(this.pollGamepadState.bind(this))},pollForActiveGamepad:function(t){for(var e=0;e<t.length;++e)if(t[e]&&t[e].buttons.length>0&&t[e].buttons[0].pressed){this.gamepadIndex=e,this.pollActiveGamepad(t);return}},pollActiveGamepad:function(t){if(void 0===this.gamepadIndex){this.pollForActiveGamepad(t);return}var e=t[this.gamepadIndex];if(!e){this.gamepadIndex=void 0,this.pollForActiveGamepad(t);return}this.pollGamepadButton(e,0,38),e.buttons.length>=2&&this.pollGamepadButton(e,1,40),e.buttons.length>=10&&this.pollGamepadButton(e,9,13),this.previousGamepad=e},pollGamepadButton:function(e,i,n){var s=e.buttons[i].pressed,r=!1;if(this.previousGamepad&&(r=this.previousGamepad.buttons[i].pressed),s!==r){var a=new KeyboardEvent(s?t.events.KEYDOWN:t.events.KEYUP,{keyCode:n});document.dispatchEvent(a)}},handleGameOverClicks:function(t){t.preventDefault(),this.distanceMeter.hasClickedOnHighScore(t)&&this.highestScore?this.distanceMeter.isHighScoreFlashing()?(this.saveHighScore(0,!0),this.distanceMeter.resetHighScore()):this.distanceMeter.startHighScoreFlashing():(this.distanceMeter.cancelHighScoreFlashing(),this.restart())},isLeftClickOnCanvas:function(e){return null!=e.button&&e.button<2&&e.type===t.events.POINTERUP&&e.target===this.canvas},scheduleNextUpdate:function(){this.updatePending||(this.updatePending=!0,this.raqId=requestAnimationFrame(this.update.bind(this)))},isRunning:function(){return!!this.raqId},saveHighScore:function(t,e){this.highestScore=Math.ceil(t),this.distanceMeter.setHighScore(this.highestScore),this.syncHighestScore&&window.localStorage&&(e?window.localStorage.setItem("highScore","0"):window.localStorage.setItem("highScore",String(this.highestScore)))},gameOver:function(){this.playSound(this.soundFx.HIT),window.navigator.vibrate&&window.navigator.vibrate(200),this.stop(),this.crashed=!0,this.distanceMeter.achievement=!1,this.tRex.update(100,d.status.CRASHED),this.gameOverPanel?this.gameOverPanel.draw():this.canvas&&(this.gameOverPanel=new o(this.canvas,this.spriteDef.TEXT_SPRITE,this.spriteDef.RESTART,this.dimensions)),this.distanceRan>this.highestScore&&this.saveHighScore(this.distanceRan),this.time=a(),im(iI,"level_end"),im(iI,"post_score",{score:this.distanceRan})},stop:function(){this.setPlayStatus(!1),this.paused=!0,cancelAnimationFrame(this.raqId),this.raqId=0},play:function(){this.crashed||(this.setPlayStatus(!0),this.paused=!1,this.tRex.update(0,d.status.RUNNING),this.time=a(),this.update())},restart:function(){im(iI,"level_start",{play_count:this.playCount}),this.raqId||(this.playCount++,this.runningTime=0,this.setPlayStatus(!0),this.paused=!1,this.crashed=!1,this.distanceRan=0,this.setSpeed(this.config.SPEED),this.time=a(),this.containerEl.classList.remove(t.classes.CRASHED),this.clearCanvas(),this.distanceMeter.reset(),this.horizon.reset(),this.tRex.reset(),this.playSound(this.soundFx.BUTTON_PRESS),this.invert(!0),this.bdayFlashTimer=null,this.update())},setPlayStatus:function(t){this.touchController,this.playing=t},isArcadeMode:function(){return!0},setArcadeMode:function(){document.body.classList.add(t.classes.ARCADE_MODE),this.setArcadeModeContainerScale()},setArcadeModeContainerScale:function(){var e=window.innerHeight,i=Math.max(1,Math.min(e/this.dimensions.HEIGHT,window.innerWidth/this.dimensions.WIDTH)),n=Math.ceil(Math.max(0,(e-this.dimensions.HEIGHT*i-t.config.ARCADE_MODE_INITIAL_TOP_POSITION)*t.config.ARCADE_MODE_TOP_POSITION_PERCENT))*window.devicePixelRatio;this.containerEl.style.transform="scale("+i+") translateY("+n+"px)"},onVisibilityChange:function(t){document.hidden||document.webkitHidden||"blur"===t.type||"visible"!==document.visibilityState?this.stop():this.crashed||(this.tRex.reset(),this.play())},playSound:function(t){if(t){var e=this.audioContext.createBufferSource();e.buffer=t,e.connect(this.audioContext.destination),e.start(0)}},invert:function(e){var i=document.firstElementChild;e?(i.classList.toggle(t.classes.INVERTED,!1),this.invertTimer=0,this.inverted=!1):this.inverted=i.classList.toggle(t.classes.INVERTED,this.invertTrigger)}},t.updateCanvasScaling=function(t,e,i){var n=t.getContext("2d"),s=Math.floor(window.devicePixelRatio)||1,r=Math.floor(n.webkitBackingStorePixelRatio)||1,a=s/r;if(s!==r){var o=e||t.width,c=i||t.height;return t.width=o*a,t.height=c*a,t.style.width=o+"px",t.style.height=c+"px",n.scale(a,a),!0}return 1===s&&(t.style.width=t.width+"px",t.style.height=t.height+"px"),!1},t.isBdayModeEnabled=function(){return!1},o.dimensions={TEXT_X:0,TEXT_Y:13,TEXT_WIDTH:191,TEXT_HEIGHT:11,RESTART_WIDTH:36,RESTART_HEIGHT:32},o.prototype={updateDimensions:function(t,e){this.canvasDimensions.WIDTH=t,e&&(this.canvasDimensions.HEIGHT=e)},draw:function(){var e=o.dimensions,n=this.canvasDimensions.WIDTH/2,s=e.TEXT_X,r=e.TEXT_Y,a=e.TEXT_WIDTH,c=e.TEXT_HEIGHT,h=Math.round(n-e.TEXT_WIDTH/2),u=Math.round((this.canvasDimensions.HEIGHT-25)/3),l=e.TEXT_WIDTH,d=e.TEXT_HEIGHT,f=e.RESTART_WIDTH,p=e.RESTART_HEIGHT,g=n-e.RESTART_WIDTH/2,m=this.canvasDimensions.HEIGHT/2;i&&(r*=2,s*=2,a*=2,c*=2,f*=2,p*=2),s+=this.textImgPos.x,r+=this.textImgPos.y,this.canvasCtx.drawImage(t.imageSprite,s,r,a,c,h,u,l,d),this.canvasCtx.drawImage(t.imageSprite,this.restartImgPos.x,this.restartImgPos.y,f,p,g,m,e.RESTART_WIDTH,e.RESTART_HEIGHT)}},l.MAX_GAP_COEFFICIENT=1.5,l.MAX_OBSTACLE_LENGTH=3,l.prototype={init:function(t){if(this.cloneCollisionBoxes(),this.size>1&&this.typeConfig.multipleSpeed>t&&(this.size=1),this.width=this.typeConfig.width*this.size,Array.isArray(this.typeConfig.yPos)){var e=s?this.typeConfig.yPosMobile:this.typeConfig.yPos;this.yPos=e[r(0,e.length-1)]}else this.yPos=this.typeConfig.yPos;this.draw(),this.size>1&&(this.collisionBoxes[1].width=this.width-this.collisionBoxes[0].width-this.collisionBoxes[2].width,this.collisionBoxes[2].x=this.width-this.collisionBoxes[2].width),this.typeConfig.speedOffset&&(this.speedOffset=Math.random()>.5?this.typeConfig.speedOffset:-this.typeConfig.speedOffset),this.gap=this.getGap(this.gapCoefficient,t)},draw:function(){var e=this.typeConfig.width,n=this.typeConfig.height;i&&(e*=2,n*=2);var s=e*this.size*(.5*(this.size-1))+this.spritePos.x;this.currentFrame>0&&(s+=e*this.currentFrame),this.canvasCtx.drawImage(t.imageSprite,s,this.spritePos.y,e*this.size,n,this.xPos,this.yPos,this.typeConfig.width*this.size,this.typeConfig.height)},update:function(t,i){this.remove||(this.typeConfig.speedOffset&&(i+=this.speedOffset),this.xPos-=Math.floor(i*e/1e3*t),this.typeConfig.numFrames&&(this.timer+=t,this.timer>=this.typeConfig.frameRate&&(this.currentFrame=this.currentFrame===this.typeConfig.numFrames-1?0:this.currentFrame+1,this.timer=0)),this.draw(),this.isVisible()||(this.remove=!0))},getGap:function(t,e){var i=Math.round(this.width*e+this.typeConfig.minGap*t),n=Math.round(i*l.MAX_GAP_COEFFICIENT);return r(i,n)},isVisible:function(){return this.xPos+this.width>0},cloneCollisionBoxes:function(){for(var t=this.typeConfig.collisionBoxes,e=t.length-1;e>=0;e--)this.collisionBoxes[e]=new u(t[e].x,t[e].y,t[e].width,t[e].height)}},l.types=[{type:"CACTUS_SMALL",width:17,height:35,yPos:105,multipleSpeed:4,minGap:120,minSpeed:0,collisionBoxes:[new u(0,7,5,27),new u(4,0,6,34),new u(10,4,7,14)]},{type:"CACTUS_LARGE",width:25,height:50,yPos:90,multipleSpeed:7,minGap:120,minSpeed:0,collisionBoxes:[new u(0,12,7,38),new u(8,0,7,49),new u(13,10,10,38)]},{type:"PTERODACTYL",width:46,height:40,yPos:[100,75,50],yPosMobile:[100,50],multipleSpeed:999,minSpeed:8.5,minGap:150,collisionBoxes:[new u(15,15,16,5),new u(18,21,24,6),new u(2,14,4,3),new u(6,10,4,7),new u(10,8,6,9)],numFrames:2,frameRate:1e3/6,speedOffset:.8},{type:"SNACK",width:33,height:42,yPos:85,multipleSpeed:999,minGap:999,minSpeed:0,collisionBoxes:[new u(0,0,40,40)]}],d.config={DROP_VELOCITY:-5,FLASH_OFF:175,FLASH_ON:100,GRAVITY:.6,HEIGHT:47,HEIGHT_BDAY:63,HEIGHT_DUCK:25,INIITAL_JUMP_VELOCITY:-10,INTRO_DURATION:1500,MAX_JUMP_HEIGHT:30,MIN_JUMP_HEIGHT:30,SPEED_DROP_COEFFICIENT:3,SPRITE_WIDTH:262,START_X_POS:50,WIDTH:44,WIDTH_DUCK:59},d.collisionBoxes={DUCKING:[new u(1,18,55,25)],RUNNING:[new u(22,0,17,16),new u(1,18,30,9),new u(10,35,14,8),new u(1,24,29,5),new u(5,30,21,4),new u(9,34,15,4)]},d.status={CRASHED:"CRASHED",DUCKING:"DUCKING",JUMPING:"JUMPING",RUNNING:"RUNNING",WAITING:"WAITING"},d.BLINK_TIMING=7e3,d.animFrames={WAITING:{frames:[44,0],msPerFrame:1e3/3},RUNNING:{frames:[88,132],msPerFrame:1e3/12},CRASHED:{frames:[220],msPerFrame:1e3/60},JUMPING:{frames:[0],msPerFrame:1e3/60},DUCKING:{frames:[264,323],msPerFrame:125}},d.prototype={init:function(){this.groundYPos=t.defaultDimensions.HEIGHT-this.config.HEIGHT-t.config.BOTTOM_PAD,this.yPos=this.groundYPos,this.minJumpHeight=this.groundYPos-this.config.MIN_JUMP_HEIGHT,this.draw(0,0),this.update(0,d.status.WAITING)},enableBdayMode:function(e){this.bdayModeActive=!0,this.spritePos=e,this.imageSprite=t.bdayImageSprite,this.groundYPos=t.defaultDimensions.HEIGHT-this.config.HEIGHT-t.config.BOTTOM_PAD_BDAY,this.yPos-=t.config.BDAY_Y_POS_ADJUST},setFlashing:function(t){this.flashing=t},setJumpVelocity:function(t){this.config.INIITAL_JUMP_VELOCITY=-t,this.config.DROP_VELOCITY=-t/2},update:function(t,e){this.timer+=t,e&&(this.status=e,this.currentFrame=0,this.msPerFrame=d.animFrames[e].msPerFrame,this.currentAnimFrames=d.animFrames[e].frames,e===d.status.WAITING&&(this.animStartTime=a(),this.setBlinkDelay())),this.playingIntro&&this.xPos<this.config.START_X_POS&&(this.xPos+=Math.round(this.config.START_X_POS/this.config.INTRO_DURATION*t),this.xInitialPos=this.xPos),this.status===d.status.WAITING?this.blink(a()):this.draw(this.currentAnimFrames[this.currentFrame],0),!this.flashing&&this.timer>=this.msPerFrame&&(this.currentFrame=this.currentFrame==this.currentAnimFrames.length-1?0:this.currentFrame+1,this.timer=0),this.speedDrop&&this.yPos===this.groundYPos&&(this.speedDrop=!1,this.setDuck(!0))},draw:function(e,n){var s=e,r=n,a=this.ducking&&this.status!==d.status.CRASHED?this.config.WIDTH_DUCK:this.config.WIDTH,o=this.bdayModeActive?this.config.HEIGHT_BDAY:this.config.HEIGHT,c=o;i&&(s*=2,r*=2,a*=2,o*=2),s+=this.spritePos.x,r+=this.spritePos.y,this.flashing&&(this.timer<this.config.FLASH_ON?this.canvasCtx.globalAlpha=.5:this.timer>this.config.FLASH_OFF&&(this.timer=0)),this.ducking&&this.status!==d.status.CRASHED?this.canvasCtx.drawImage(t.imageSprite,s,r,a,o,this.xPos,this.yPos,this.config.WIDTH_DUCK,c):(this.ducking&&this.status===d.status.CRASHED&&this.xPos++,this.canvasCtx.drawImage(t.imageSprite,s,r,a,o,this.xPos,this.yPos,this.config.WIDTH,c)),this.canvasCtx.globalAlpha=1},setBlinkDelay:function(){this.blinkDelay=Math.ceil(Math.random()*d.BLINK_TIMING)},blink:function(t){t-this.animStartTime>=this.blinkDelay&&(this.draw(this.currentAnimFrames[this.currentFrame],0),1===this.currentFrame&&(this.setBlinkDelay(),this.animStartTime=t,this.blinkCount++))},startJump:function(t){this.jumping||(this.update(0,d.status.JUMPING),this.jumpVelocity=this.config.INIITAL_JUMP_VELOCITY-t/10,this.jumping=!0,this.reachedMinHeight=!1,this.speedDrop=!1)},endJump:function(){this.reachedMinHeight&&this.jumpVelocity<this.config.DROP_VELOCITY&&(this.jumpVelocity=this.config.DROP_VELOCITY)},updateJump:function(t,e){var i=t/d.animFrames[this.status].msPerFrame;this.speedDrop?this.yPos+=Math.round(this.jumpVelocity*this.config.SPEED_DROP_COEFFICIENT*i):this.yPos+=Math.round(this.jumpVelocity*i),this.jumpVelocity+=this.config.GRAVITY*i,(this.yPos<this.minJumpHeight||this.speedDrop)&&(this.reachedMinHeight=!0),(this.yPos<this.config.MAX_JUMP_HEIGHT||this.speedDrop)&&this.endJump(),this.yPos>this.groundYPos&&(this.reset(),this.jumpCount++)},setSpeedDrop:function(){this.speedDrop=!0,this.jumpVelocity=1},setDuck:function(t){t&&this.status!==d.status.DUCKING?(this.update(0,d.status.DUCKING),this.ducking=!0):this.status===d.status.DUCKING&&(this.update(0,d.status.RUNNING),this.ducking=!1)},reset:function(){this.xPos=this.xInitialPos,this.yPos=this.groundYPos,this.jumpVelocity=0,this.jumping=!1,this.ducking=!1,this.update(0,d.status.RUNNING),this.midair=!1,this.speedDrop=!1,this.jumpCount=0}},f.dimensions={WIDTH:10,HEIGHT:13,DEST_WIDTH:11},f.yPos=[0,13,27,40,53,67,80,93,107,120],f.config={MAX_DISTANCE_UNITS:5,ACHIEVEMENT_DISTANCE:100,COEFFICIENT:.025,FLASH_DURATION:250,FLASH_ITERATIONS:3,HIGH_SCORE_HIT_AREA_PADDING:4},f.prototype={init:function(t){var e="";this.calcXPos(t),this.maxScore=this.maxScoreUnits;for(var i=0;i<this.maxScoreUnits;i++)this.draw(i,0),this.defaultString+="0",e+="9";this.maxScore=parseInt(e,10)},calcXPos:function(t){this.x=t-f.dimensions.DEST_WIDTH*(this.maxScoreUnits+1)},draw:function(t,e,n){var s=f.dimensions.WIDTH,r=f.dimensions.HEIGHT,a=f.dimensions.WIDTH*e,o=0,c=t*f.dimensions.DEST_WIDTH,h=this.y,u=f.dimensions.WIDTH,l=f.dimensions.HEIGHT;if(i&&(s*=2,r*=2,a*=2),a+=this.spritePos.x,o+=this.spritePos.y,this.canvasCtx.save(),n){var d=this.x-2*this.maxScoreUnits*f.dimensions.WIDTH;this.canvasCtx.translate(d,this.y)}else this.canvasCtx.translate(this.x,this.y);this.canvasCtx.drawImage(this.image,a,o,s,r,c,h,u,l),this.canvasCtx.restore()},getActualDistance:function(t){return t?Math.round(t*this.config.COEFFICIENT):0},update:function(t,e){var i=!0,n=!1;if(this.achievement)this.flashIterations<=this.config.FLASH_ITERATIONS?(this.flashTimer+=t,this.flashTimer<this.config.FLASH_DURATION?i=!1:this.flashTimer>2*this.config.FLASH_DURATION&&(this.flashTimer=0,this.flashIterations++)):(this.achievement=!1,this.flashIterations=0,this.flashTimer=0);else if((e=this.getActualDistance(e))>this.maxScore&&this.maxScoreUnits==this.config.MAX_DISTANCE_UNITS?(this.maxScoreUnits++,this.maxScore=parseInt(this.maxScore+"9",10)):this.distance=0,e>0){e%this.config.ACHIEVEMENT_DISTANCE==0&&(this.achievement=!0,this.flashTimer=0,n=!0);var s=(this.defaultString+e).substr(-this.maxScoreUnits);this.digits=s.split("")}else this.digits=this.defaultString.split("");if(i)for(var r=this.digits.length-1;r>=0;r--)this.draw(r,parseInt(this.digits[r],10));return this.drawHighScore(),n},drawHighScore:function(){this.canvasCtx.save(),this.canvasCtx.globalAlpha=.8;for(var t=this.highScore.length-1;t>=0;t--)this.draw(t,parseInt(this.highScore[t],10),!0);this.canvasCtx.restore()},setHighScore:function(t){t=this.getActualDistance(t);var e=(this.defaultString+t).substr(-this.maxScoreUnits);this.highScore=["10","11",""].concat(e.split(""))},hasClickedOnHighScore:function(t){var e=0,i=0;if(t.touches){var n=this.canvas.getBoundingClientRect();e=t.touches[0].clientX-n.left,i=t.touches[0].clientY-n.top}else e=t.offsetX,i=t.offsetY;return this.highScoreBounds=this.getHighScoreBounds(),e>=this.highScoreBounds.x&&e<=this.highScoreBounds.x+this.highScoreBounds.width&&i>=this.highScoreBounds.y&&i<=this.highScoreBounds.y+this.highScoreBounds.height},getHighScoreBounds:function(){return{x:this.x-2*this.maxScoreUnits*f.dimensions.WIDTH-f.config.HIGH_SCORE_HIT_AREA_PADDING,y:this.y,width:f.dimensions.WIDTH*(this.highScore.length+1)+f.config.HIGH_SCORE_HIT_AREA_PADDING,height:f.dimensions.HEIGHT+2*f.config.HIGH_SCORE_HIT_AREA_PADDING}},flashHighScore:function(){var t=a(),e=t-(this.frameTimeStamp||t),i=!0;if(this.frameTimeStamp=t,this.flashIterations>2*this.config.FLASH_ITERATIONS){this.cancelHighScoreFlashing();return}this.flashTimer+=e,this.flashTimer<this.config.FLASH_DURATION?i=!1:this.flashTimer>2*this.config.FLASH_DURATION&&(this.flashTimer=0,this.flashIterations++),i?this.drawHighScore():this.clearHighScoreBounds(),this.flashingRafId=requestAnimationFrame(this.flashHighScore.bind(this))},clearHighScoreBounds:function(){this.canvasCtx.save(),this.canvasCtx.fillStyle="#fff",this.canvasCtx.rect(this.highScoreBounds.x,this.highScoreBounds.y,this.highScoreBounds.width,this.highScoreBounds.height),this.canvasCtx.fill(),this.canvasCtx.restore()},startHighScoreFlashing:function(){this.highScoreFlashing=!0,this.flashHighScore()},isHighScoreFlashing:function(){return this.highScoreFlashing},cancelHighScoreFlashing:function(){this.flashingRafId&&cancelAnimationFrame(this.flashingRafId),this.flashIterations=0,this.flashTimer=0,this.highScoreFlashing=!1,this.clearHighScoreBounds(),this.drawHighScore()},resetHighScore:function(){this.setHighScore(0),this.cancelHighScoreFlashing()},reset:function(){this.update(0,0),this.achievement=!1}},p.config={HEIGHT:14,HEIGHT_BALLOON:34,MAX_CLOUD_GAP:300,MAX_SKY_LEVEL:30,MIN_CLOUD_GAP:100,MIN_SKY_LEVEL:71,WIDTH:46,WIDTH_BALLOON:16},p.prototype={init:function(){this.yPos=r(p.config.MAX_SKY_LEVEL,p.config.MIN_SKY_LEVEL),this.draw()},draw:function(){this.canvasCtx.save();var e=this.isBalloon?p.config.WIDTH_BALLOON:p.config.WIDTH,n=this.isBalloon?p.config.HEIGHT_BALLOON:p.config.HEIGHT,s=e,r=n;i&&(e*=2,n*=2),this.canvasCtx.drawImage(t.imageSprite,this.spritePos.x,this.spritePos.y,e,n,this.xPos,this.yPos,s,r),this.canvasCtx.restore()},update:function(t){this.remove||(this.xPos-=Math.ceil(t),this.draw(),this.isVisible()||(this.remove=!0))},isVisible:function(){return this.xPos+p.config.WIDTH>0}},g.config={FADE_SPEED:.035,HEIGHT:40,MOON_SPEED:.25,NUM_STARS:2,STAR_SIZE:9,STAR_SPEED:.3,STAR_MAX_Y:70,WIDTH:20},g.phases=[140,120,100,60,40,20,0],g.prototype={update:function(t,e){if(t&&0===this.opacity&&(this.currentPhase++,this.currentPhase>=g.phases.length&&(this.currentPhase=0)),t&&(this.opacity<1||0===this.opacity)?this.opacity+=g.config.FADE_SPEED:this.opacity>0&&(this.opacity-=g.config.FADE_SPEED),this.opacity>0){if(this.xPos=this.updateXPos(this.xPos,g.config.MOON_SPEED),this.drawStars)for(var i=0;i<g.config.NUM_STARS;i++)this.stars[i].x=this.updateXPos(this.stars[i].x,g.config.STAR_SPEED);this.draw()}else this.opacity=0,this.placeStars();this.drawStars=!0},updateXPos:function(t,e){return t<-g.config.WIDTH?t=this.containerWidth:t-=e,t},draw:function(){var e=3===this.currentPhase?2*g.config.WIDTH:g.config.WIDTH,n=g.config.HEIGHT,s=this.spritePos.x+g.phases[this.currentPhase],r=e,a=g.config.STAR_SIZE,o=t.spriteDefinition.LDPI.STAR.x;if(i&&(e*=2,n*=2,s=this.spritePos.x+2*g.phases[this.currentPhase],a*=2,o=t.spriteDefinition.HDPI.STAR.x),this.canvasCtx.save(),this.canvasCtx.globalAlpha=this.opacity,this.drawStars)for(var c=0;c<g.config.NUM_STARS;c++)this.canvasCtx.drawImage(t.imageSprite,o,this.stars[c].sourceY,a,a,Math.round(this.stars[c].x),this.stars[c].y,g.config.STAR_SIZE,g.config.STAR_SIZE);this.canvasCtx.drawImage(t.imageSprite,s,this.spritePos.y,e,n,Math.round(this.xPos),this.yPos,r,g.config.HEIGHT),this.canvasCtx.globalAlpha=1,this.canvasCtx.restore()},placeStars:function(){for(var e=Math.round(this.containerWidth/g.config.NUM_STARS),n=0;n<g.config.NUM_STARS;n++)this.stars[n]={},this.stars[n].x=r(e*n,e*(n+1)),this.stars[n].y=r(0,g.config.STAR_MAX_Y),i?this.stars[n].sourceY=t.spriteDefinition.HDPI.STAR.y+2*g.config.STAR_SIZE*n:this.stars[n].sourceY=t.spriteDefinition.LDPI.STAR.y+g.config.STAR_SIZE*n},reset:function(){this.currentPhase=0,this.opacity=0,this.update(!1)}},m.dimensions={WIDTH:600,HEIGHT:12,YPOS:127},m.prototype={setSourceDimensions:function(){for(var t in m.dimensions)i?"YPOS"!==t&&(this.sourceDimensions[t]=2*m.dimensions[t]):this.sourceDimensions[t]=m.dimensions[t],this.dimensions[t]=m.dimensions[t];this.xPos=[0,m.dimensions.WIDTH],this.yPos=m.dimensions.YPOS},getRandomType:function(){return Math.random()>this.bumpThreshold?this.dimensions.WIDTH:0},draw:function(){this.canvasCtx.drawImage(t.imageSprite,this.sourceXPos[0],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[0],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT),this.canvasCtx.drawImage(t.imageSprite,this.sourceXPos[1],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[1],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT)},updateXPos:function(t,e){var i=0===t?1:0;this.xPos[t]-=e,this.xPos[i]=this.xPos[t]+this.dimensions.WIDTH,this.xPos[t]<=-this.dimensions.WIDTH&&(this.xPos[t]+=2*this.dimensions.WIDTH,this.xPos[i]=this.xPos[t]-this.dimensions.WIDTH,this.sourceXPos[t]=this.getRandomType()+this.spritePos.x)},update:function(t,i){var n=Math.floor(e/1e3*i*t);this.xPos[0]<=0?this.updateXPos(0,n):this.updateXPos(1,n),this.draw()},reset:function(){this.xPos[0]=0,this.xPos[1]=m.dimensions.WIDTH}},v.config={BG_CLOUD_SPEED:.2,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,HORIZON_HEIGHT:16,MAX_CLOUDS:6},v.prototype={init:function(){this.addCloud(),this.horizonLine=new m(this.canvas,this.spritePos.HORIZON),this.nightMode=new g(this.canvas,this.spritePos.MOON,this.dimensions.WIDTH)},enableBdayMode:function(){this.bdayModeActive=!0,this.removeFirstObstacle()},update:function(t,e,i,n){this.runningTime+=t,this.horizonLine.update(t,e),this.nightMode.update(n),this.updateClouds(t,e),i&&this.updateObstacles(t,e)},updateClouds:function(t,e){var i=this.cloudSpeed/1e3*t*e,n=this.clouds.length;if(n){for(var s=n-1;s>=0;s--)this.clouds[s].update(i);var r=this.clouds[n-1];n<this.config.MAX_CLOUDS&&this.dimensions.WIDTH-r.xPos>r.cloudGap&&this.cloudFrequency>Math.random()&&this.addCloud(),this.clouds=this.clouds.filter(function(t){return!t.remove})}else this.addCloud()},updateObstacles:function(t,e){for(var i=this.obstacles.slice(0),n=0;n<this.obstacles.length;n++){var s=this.obstacles[n];s.update(t,e),s.remove&&i.shift()}if(this.obstacles=i,this.obstacles.length>0){var r=this.obstacles[this.obstacles.length-1];r&&!r.followingObstacleCreated&&r.isVisible()&&r.xPos+r.width+r.gap<this.dimensions.WIDTH&&(this.addNewObstacle(e),r.followingObstacleCreated=!0)}else this.addNewObstacle(e)},removeFirstObstacle:function(){this.obstacles.shift()},addNewObstacle:function(e){var i=r(0,t.isBdayModeEnabled()&&!this.bdayModeActive?l.types.length-1:l.types.length-2),n=l.types[i];if(this.duplicateObstacleCheck(n.type)||e<n.minSpeed)this.addNewObstacle(e);else{var s=this.spritePos[n.type];this.obstacles.push(new l(this.canvasCtx,n,s,this.dimensions,this.gapCoefficient,e,n.width)),this.obstacleHistory.unshift(n.type),this.obstacleHistory.length>1&&this.obstacleHistory.splice(t.config.MAX_OBSTACLE_DUPLICATION)}},duplicateObstacleCheck:function(e){for(var i=0,n=0;n<this.obstacleHistory.length;n++)i=this.obstacleHistory[n]===e?i+1:0;return i>=t.config.MAX_OBSTACLE_DUPLICATION},reset:function(){this.obstacles=[],this.horizonLine.reset(),this.nightMode.reset()},resize:function(t,e){this.canvas.width=t,this.canvas.height=e},addCloud:function(){var t=this.bdayModeActive&&r(0,1)>0?this.spritePos.BALLOON:this.spritePos.CLOUD;this.clouds.push(new p(this.canvas,t,this.dimensions.WIDTH,t==this.spritePos.BALLOON))}},new t("#game",{ACCELERATION:.001,BG_CLOUD_SPEED:.2,BOTTOM_PAD:10,BOTTOM_PAD_BDAY:26,BDAY_FLASH_DURATION:1e3,BDAY_Y_POS_ADJUST:16,CLEAR_TIME:3e3,CLOUD_FREQUENCY:.5,GAMEOVER_CLEAR_TIME:750,GAP_COEFFICIENT:.6,GRAVITY:.6,INITIAL_JUMP_VELOCITY:12,INVERT_FADE_DURATION:12e3,INVERT_DISTANCE:700,MAX_BLINK_COUNT:3,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_OBSTACLE_DUPLICATION:2,MAX_SPEED:13,MIN_JUMP_HEIGHT:35,MOBILE_SPEED_COEFFICIENT:1.2,RESOURCE_TEMPLATE_ID:"audio-resources",SPEED:6,SPEED_DROP_COEFFICIENT:3,ARCADE_MODE_INITIAL_TOP_POSITION:35,ARCADE_MODE_TOP_POSITION_PERCENT:.1})}();var iT={};iT=b("kaiwS").getBundleURL("paGDn")+"sw.js","serviceWorker"in navigator&&(navigator.serviceWorker.controller||navigator.serviceWorker.register(iT,{scope:"./"})),new function(t){var e,i=function(i){e&&(e.prompt(),e.userChoice.then(function(i){e=null,t.classList.remove("available")}).catch(function(i){e=null,t.classList.remove("available")}))};window.addEventListener("beforeinstallprompt",function(i){return(e=i).preventDefault(),t.classList.add("available"),!1}),window.addEventListener("appinstalled",function(i){e=null,t.classList.remove("available")}),t.addEventListener("click",i.bind(this)),t.addEventListener("touchend",i.bind(this))}(document.getElementById("installer"))}();