!function(){let e=document.head.querySelector('link[rel="manifest"]'),t=e?e.href:"";if(!("fetch"in window))return;let n=["standalone","fullscreen","minimal-ui"],l="#f8f9fa",r=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple"),i=navigator.userAgent&&-1!==navigator.userAgent.indexOf("Edge"),o="undefined"!=typeof Windows;function a(){window.fetch(t).then(e=>e.json()).then(e=>(function(e){let t;(e.icons||[]).sort((e,t)=>parseInt(t.sizes,10)-parseInt(e.sizes,10));let a=function(){if(!(document.querySelectorAll&&document.querySelectorAll('link[rel="apple-touch-icon"]')))return"/apple-touch-icon.png";{let t;let n=document.querySelectorAll('link[rel="apple-touch-icon"]'),l=0;for(let r=0;r<n.length;r++)try{var e=n[r].getAttribute("sizes").split("x")[0];e>l&&(l=e),t=n[r].getAttribute("href")}catch(e){t||(t=n[r].getAttribute("href"))}return t}}(),d=e.display,h=-1!==n.indexOf(d);c("mobile-web-app-capable",h),function(e){if(!(r||o))return;let t=p(e);if(r)c("apple-mobile-web-app-status-bar-style",t?"black":"default");else{let n=function(){try{return Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar}catch(e){return null}}();if(null===n){console.debug("UWP no titleBar");return}n.foregroundColor=u(t?"black":"white"),n.backgroundColor=u(e)}}(e.theme_color||"black"),i&&(c("msapplication-starturl",e.start_url||"/"),c("msapplication-TileColor",e.theme_color)),document.head.querySelector('[name="theme-color"]')||c("theme-color",e.theme_color);let f=function(e){let t=(e=String(e||"")).substr(0,3);return"por"===t?"portrait":"lan"===t?"landscape":""}(e.orientation);if(c("x5-orientation",f),c("screen-orientation",f),"fullscreen"===d?(c("x5-fullscreen","true"),c("full-screen","yes")):h&&(c("x5-page-mode","app"),c("browsermode","application")),!r)return;let m=p(e.background_color||l),w=e.name||e.short_name||document.title,g=((e.related_applications||[]).filter(e=>"itunes"===e.platform).forEach(e=>{if(e.id)t=e.id;else{let n=e.url.match(/id(\d+)/);n&&(t=n[1])}}),t);function b({width:t,height:n},r,i){let o=window.devicePixelRatio,a=s({width:t*o,height:n*o});a.scale(o,o),a.fillStyle=e.background_color||l,a.fillRect(0,0,t,n),a.translate(t/2,(n-0)/2),a.font="36px HelveticaNeue-CondensedBold",a.fillStyle=m?"white":"black";let c=a.measureText(w).width;if(i){let e=i.width/o,t=i.height/o;t>128&&(e/=t/128,t=128),e>=48&&t>=48&&(a.drawImage(i,-(e/2),-(t/2)-24,e,t),a.translate(0,t/2+0))}a.fillText(w,-(c/2),16);let u=document.createElement("link");return u.setAttribute("rel","apple-touch-startup-image"),u.setAttribute("media",`(orientation: ${r})`),u.setAttribute("href",a.canvas.toDataURL()),u}g&&c("apple-itunes-app",`app-id=${g}`),c("apple-mobile-web-app-capable",h),c("apple-mobile-web-app-title",w);let y=new Set,A=new Image;A.crossOrigin="anonymous",A.onload=()=>{(function(e){let t=b(window.screen,"portrait",e),n=b({width:window.screen.height,height:window.screen.width},"landscape",e);y.forEach(e=>e.remove()),document.head.appendChild(t),document.head.appendChild(n),y.add(t),y.add(n)})(A),console.log("done")},A.src=a})(e)).catch(e=>console.warn("pwacompat.js error",e))}function c(e,t){t&&(!0===t&&(t="yes"),function(e,t){let n=document.createElement(e);for(let e in t)n.setAttribute(e,t[e]);document.head.appendChild(n)}("meta",{name:e,content:t}))}function u(e){let t=d(e);return{r:t[0],g:t[1],b:t[2],a:t[3]}}function d(e){let t=s();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}function p(e){let t=d(e).map(e=>{let t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return Math.abs(1.05/(.2126*t[0]+.7152*t[1]+.0722*t[2]+.05))>3}function s({width:e,height:t}={width:1,height:1}){let n=document.createElement("canvas");return n.width=e,n.height=t,n.getContext("2d")}"complete"===document.readyState?a():window.addEventListener("load",a)}();